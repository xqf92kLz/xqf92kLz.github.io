## 定积分的概念和性质

### 定积分的概念

- 分割、近似、求和、取极限

	记 $\lambda=\max\{\Delta x_1,\Delta x_2,\cdots,\Delta x_n\}$，$\int_a^bf(x)\text dx=\lim\limits_{\lambda\to 0}\sum_{i=1}^n f(\xi_i)\Delta x_i$。

	注：不定积分是原函数的全体，定积分是一个具体的数值。

- 几何意义

	???+ example "例题"
	
		计算：$I=\int_0^2\sqrt{4x-x^2}\text dx$。
		
		??? note "解答"
			$y=\sqrt{4x-x^2}\Rightarrow y^2=4x-x^2\Rightarrow y^2+(x-2)^2=4$
			
			以 $(2,0)$ 为圆心、$2$ 为半径的半圆，$I=\dfrac 1 4 \pi\cdot 2^2=\pi$。

- 定积分的精确定义：设 $f(x)$ 在 $[a,b]$ 上可积，则 $\int_a^b f(x)\text dx=\lim\limits_{n\to \infty}\sum_{i=1}^n f(a+\dfrac{b-a}ni)\dfrac{b-a}n$。特别地，$\int_0^1 f(x)\text dx=\lim\limits_{n\to\infty}\sum_{i=1}^n f(\dfrac i n)\dfrac 1 n$。

	???+ example "例题"
		计算：$\lim\limits_{n\to\infty}(\dfrac 1 {\sqrt{n^2+1^2}}+\dfrac{1}{\sqrt{n^2+2^2}}+\cdots+\dfrac 1 {\sqrt{n^2+n^2}})$。
		
		??? note "解答"
			$I=\lim\limits_{n\to\infty}\sum_{i=1}^n\sum_{i=1}^n\dfrac 1 {\sqrt{n^2+i^2}}=\lim\limits_{n\to\infty}\sum_{i=1}^n\dfrac 1 {\sqrt{1+(\frac i n)^2}}\cdot\dfrac 1 n=\int_0^1\dfrac 1 {\sqrt{1+x^2}}\text dx=\ln(x+\sqrt{1+x^2})\vert_0^1=\ln(1+\sqrt 2)$

### 可积的概念和定理

- 可积的定义：当函数 $f(x)$ 在区间 $[a,b]$ 上的定积分存在时，称 $f(x)$ 在区间 $[a,b]$ 上可积。

	???+ info
		只要找到两种不同的取 $x_i$ 或取 $\xi_i$ 方法，极限不同或不存在 $\Rightarrow$ 不可积。


		如 $D(x)$ 不可积：取 $f(\xi_i)=1$ 或 $f(\xi_i)=0$，极限不同。

- 可积的必要条件：若函数 $f(x)$ 在 $[a,b]$ 上可积，则 $f(x)$ 在 $[a,b]$ 上必有界。

- 可积的充要条件：

	1. 若函数 $f(x)$ 在区间 $[a,b]$ 上连续，则 $f(x)$ 在区间 $[a,b]$ 上可积；

	2. 若函数 $f(x)$ 在区间 $[a,b]$ 上单调，则 $f(x)$ 在区间 $[a,b]$ 上可积；

	3. 若函数 $f(x)$ 在区间 $[a,b]$ 上有界，且只有有限个间断点，则 $f(x)$ 在区间 $[a,b]$ 上可积。

	4. 初等函数在其定义区间内的任意子区间上都是可积的；

	注：若 $f(x)$ 在 $[a,b]$ 上可积，则 $f(x)$ 在 $[a,b],[a,b),(a,b],(a,b)$ 上均可积且定积分相等。

	???+ example "例题"
		函数 $f(x)=\text{sgn } x=\begin{cases}1,&x>0\\0,&x=0\\-1,&x<0\end{cases}$ 在区间 $[-2,2]$ 上是否可积？是否存在原函数？
		
		??? note "解答"
			可积但不存在原函数。

### 定积分的性质

（假设以下定积分都存在）

- 两个补充规定

	$\int_a^af(x)\text dx=0$，$\int_a^b f(x)\text dx=-\int_b^af(x)\text dx$
	
- 积分函数的可加性和数乘性（线性性）

	$\int_a^b[\alpha f(x)+\beta g(x)]\text dx=\alpha\int_a^b f(x)\text dx+\beta\int_a^b g(x)\text dx$（$\alpha,\beta$ 均为常数）

- 积分区间的可加性

	$\int_a^b f(x)\text dx=\int_a^c f(x)\text dx+\int_c^b f(x)\text dx$

- 如果在 $[a,b]$ 上 $f(x)\equiv 1$，则 $\int_a^b 1\text dx=\int_a^b\text dx=b-a$

- 设 $a<b$，如果在 $[a,b]$ 上 $f(x)\geq 0$，则 $\int_a^b f(x)\text dx\geq 0$。（如果 $a>b$，结果的正负会反过来）

	事实上，只要 **连续** 函数 $f(x)\geq 0$ 且 $f(x)$ 在 $[a,b]$ 上不恒等于 $0$，则必有 $\int_a^b f(x)\text dx>0$。

	???+ warning "注意"

		“若 $f(x)\geq 0$ 且 $f(x)$ 不恒等于 $0$，则 $\int_a^b f(x)\text dx>0$”是错误的。

	推论：

	- 设 $a<b$，如果在 $[a,b]$ 上，$f(x)\leq g(x)$，则 $\int_a^b f(x)\text dx\leq \int_a^b g(x)\text dx$。

	- （绝对值不等式）设 $a<b$，则 $|\int_a^b f(x)\text dx|\leq \int_a^b|f(x)|\text dx$。

		??? note "证明"
			即证 $-\int_a^b|f(x)|\text dx\leq \int_a^b f(x)\text dx\leq \int_a^b|f(x)|\text dx$【证 $|A|\leq B$，即证 $-B\leq A\leq B$】。
  		
  	
			由 $-|f(x)|\leq f(x)\leq |f(x)|$，得证。

		???+ example "例题"
			设 $I_1=\int_0^{\frac{\pi}4}\dfrac{\tan x}x\text dx$，$I_2=\int_0^{\frac{\pi}4}\dfrac{x}{\tan x}\text dx$，则 $I_1,I_2,1$ 的大小关系为？
  	
		??? note "解答"

			答案：$1>I_1>I_2$。
   		
			① $x\in[0,\dfrac{\pi}2]$，由于 $0<x<\tan x$，则 $\dfrac{\tan x}x>1>\dfrac x {tan x}$，即 $I_1>I_2$。
   		
			② $I_2=\int_0^{\frac{\pi}4}\dfrac x {\tan x}\text dx<\int_0^{\frac {\pi}4}1\text dx=\dfrac{\pi}4<1$
   		
			④ 下证 $I_1<1$。
   		
			???+ abstract
				$1=\tan x\vert_0^{\frac{\pi}4}=\int_0^{\frac{\pi}4}\sec^2 x\text dx$
   	
			只需证 $\int_0^{\frac{\pi}4}\dfrac{\tan x}x\text dx<\int_0^{\frac{\pi}4}\sec^2 x\text dx=1$。
   		
			$\dfrac{\frac{\tan x}x}{\sec^2 x}=\dfrac{\sin x\cos x}x<\dfrac{\sin x}x<1$，则 $\dfrac{\tan x}x<\sec^2 x$，即 $\int_0^{\frac{\pi}4}\dfrac{\tan x}x\text dx<\int_0^{\frac{\pi}4}\sec^2 x\text dx=1$，得证。

- 估值不等式：设 $a<b$，且 $M,m$ 分别是函数 $f(x)$ 在 $[a,b]$ 上的最大值及最小值，则 $m(b-a)\leq \int_a^b f(x)\text dx\leq M(b-a)$。

	???+ example "例题"
		证明：$1\leq \int_0^1 e^{x^2}\text dx\leq e$。
		
		??? note "解答"
			在 $[0,1]$ 上，$1\leq e^{x^2}\leq e$。
			
			由估值不等式，$1\cdot 1\int_0^1 e^{x^2}\text dx\leq e\cdot 1$，即 $1\leq \int_0^1 e^{x^2}\text dx\leq e$。
		
		设 $|f(x)|\leq 2$，证明 $\int_0^1 f(x)\text dx\leq 2$。
		
		??? note "解答"
			$\int_0^1 f(x)\text dx\leq |\int_0^1 f(x)\text dx|\leq \int_0^1|f(x)|\text dx$【绝对值不等式】$\leq 2$【估值不等式】

- 定积分中值定理（积分中值公式）：设 $f(x)$ 在 $[a,b]$ 上连续，则至少存在一点 $\xi\in[a,b]$，使得 $\int_a^b f(x)\text dx=f(\xi)(b-a)$。其中，$f(\xi)=\dfrac 1 {b-a}\int_a^b f(x)\text dx$ 称为函数 $f(x)$ 在区间 $[a,b]$ 上的平均值。。
	
	作用：“不算，而去积分”
	
	??? note "证明"
		???+ abstract
			证 $f(\xi)=\dfrac 1 {b-a}\int_a^b f(x)\text dx$：考虑 $\dfrac 1 {b-a}\int_a^b f(x)\text dx$ 放到 $f(x)$ 的最小值和最大值之间凑成介值定理。
		
		由 $f(x)$ 在 $[a,b]$ 上连续，故 $f(x)$ 有最大值 $M$、最小值 $m$。
		
		由估值不等式，$m(b-a)\leq \int_a^b f(x)\text dx\leq M(b-a)$，即 $m\leq \dfrac{\int_a^b f(x)\text dx}{b-a}\leq M$。
		
		由介值定理，$\exist \xi\in[a,b]$ 使 $f(\xi)=\dfrac{\int_a^b f(x)\text dx}{b-a}$，得证。

- 加强形式的积分中值定理：设 $f(x)$ 在 $[a,b]$ 上连续，则至少存在一点 $\xi\in(a,b)$，使得 $\int_a^b f(x)\text dx=f(\xi)(b-a)$。

	???+ example "例题"
		设 $f(x)$ 在 $[a,b]$ 上连续，$(a,b)$ 内可导，且 $\dfrac 1 {b-a}\int_a^b f(x)\text dx=f(b)$，证明：$\exists \xi\in(a,b)$，使得 $f'(\xi)=0$。
		
		??? note "解答"
			$f(x)$ 在 $[a,b]$ 连续，由积分中值定理，$\exists c\in(a,b)$，$f(c)=\dfrac 1 {b-a}\int_a^b f(x)\text dx=f(b)$。
			
			由罗尔定理，$\exists\xi\in(c,b)\subset (a,b)$ 使 $f'(\xi)=0$。

- 推广的积分中值定理：设 $f(x),g(x)$ 在 $[a,b]$ 上连续，$g(x)$ 不变号，则在 $[a,b]$ 上至少存在一点 $\xi$，使得 $\int_a^b f(x)g(x)\text dx=f(\xi)\int_a^b g(x)\text dx$。（$g(x)\equiv 1$ 时，即为积分中值定理）

	??? note "证明"
		???+ abstract
			证 $f(\xi)=\dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}$：考虑 $\dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}$ 放到 $f(x)$ 的最小值和最大值之间凑成介值定理。
		
		由 $f(x)$ 在 $[a,b]$ 上连续，故 $f(x)$ 有最大值 $M$、最小值 $m$。
		
		由定积分的不等式性质，$m\int_a^b g(x)\text dx\leq \int_a^b f(x)g(x)\text dx\leq M\int_a^b g(x)\text dx$。
		
		若 $\int_a^b g(x)\text dx=0$，则由上式知 $\int_a^b f(x)g(x)\text dx=0$，从而对 $\forall \xi\in[a,b]$，原式都成立。
		
		若 $\int_a^b g(x)\text dx>0$，即有 $m\leq\dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}\leq M$。由介值定理，$\exist \xi\in[a,b]$ 使 $f(\xi)=\dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}$，得证。

- 柯西不等式：设 $f(x),g(x)$ 在积分区间 $[a,b]$ 连续，则 $[\int_a^b f(x)g(x)\text dx]^2\leq \int_a^b f^2(x)\text dx\cdot \int_a^b g^2(x)\text dx$。

	??? note "证明"
		- **法 1：**
		
			令 $F(x)=[\int_a^x f(t)g(t)\text dt]^2-\int_a^x f^2(t)\text dt\cdot\int_a^x g^2(t)\text dt$，其中 $F(a)=0$。
			
			$F'(x)=2\int_a^x f(t)g(t)\text dt\cdot f(x)g(x)-f^2(x)\int_a^x g^2(t)\text dt-g^2(x)\int_a^x f^2(t)\text dt$
			
			【对 $t$ 积分，把 $x$ 当常数，可以“自由进出”积分】
			
			$=-\int_a^x[-2f(t)g(t)f(x)g(x)+f^2(x)g^2(t)+g^2(x)f^2(t)]\text dt$
			
			$=-\int_a^x[f(x)g(t)-g(x)f(t)]^2\text dt\leq 0$
			
			故 $F(x)$ 单调不增，$F(b)\leq F(a)=0$，得证。
		
		- **法 2：**
		
			$\forall k\in \mathbb R$，$[f(x)-kg(x)]^2\geq 0$。
			
			$\int_a^b [f(x)-kg(x)]^2\text dx\geq 0$
			
			即 $\int_a^b f^2(x)\text dx-2k\int_a^b f(x)g(x)\text dx+k^2\int_a^b g^2(x)\text dx\geq 0$，看成关于 $k$ 的一元二次多项式，则有：
			
			$\Delta =4(\int_a^b f(x)g(x)\text dx)^2-4\int_a^b g^2(x)\text dx\cdot\int_a^b f^2(x)\text dx\leq 0$
			
			即 $[\int_a^bf(x)g(x)\text dx]^2\leq\int_a^b f^2(x)\text dx\cdot\int_a^b g^2(x)\text dx$。

## 定积分的计算

### 微积分基本定理

- 积分上（下）限的定义：设函数 $f(x)$ 在 $[a,b]$ 上可积，$x\in[a,b]$，则称 $\Phi(x)=\int_a^x f(t)\text dt$ 为积分上限的函数（或变上限积分），$\Phi(x)=\int_x^b f(t)\text dt$ 为积分下限函数（或变下限积分）。
- 积分上限函数的导数：如果函数 $f(x)$ 在 $[a,b]$ 上连续，那么积分上限函数 $\Phi(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上可导，且 $\Phi'(x)=\dfrac{\text d}{\text dx}\int_a^x f(t)\text dt=f(x)$。

	注：若函数 $f(x)$ 在区间 $[a,b]$ 上连续，则函数 $\Phi(x)=\int_a^x f(t)\text dt$ 就是 $f(x)$ 在区间 $[a,b]$ 上的一个原函数。
	
	??? note "证明"
		
		$\Phi'(x)=\lim\limits_{\Delta x\to 0}\dfrac{\Phi(x+\Delta x)-\Phi(x)}{\Delta x}=\lim\limits_{\Delta x\to 0}\dfrac{\int_x^{x+\Delta x}f(t)\text dt}{\Delta x}=\lim\limits_{\Delta x\to 0}\dfrac{f(\xi)\Delta x}{\Delta x}$【由于 $f(x)$ 连续，可用积分中值定理。$\xi$ 在 $x$ 与 $x+\Delta x$ 之间】$=\lim\limits_{\Delta x\to 0}f(\xi)=\lim\limits_{\xi\to x}f(\xi)=f(x)$【$f(x)$ 处连续】。
	
- 变上限积分的性质：

	1. 若 $f(x)$ 在 $[a,b]$ 上可积，则函数 $F(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上连续；
	
		??? note "证明"
			
			???+ abstract
				在 $x$ 处 $\lim\limits_{\Delta x\to 0}\Delta y=0\Leftrightarrow F(x)$ 在 $x$ 处连续，即证 $\lim\limits_{\Delta x\to 0}[F(x+\Delta x)-F(x)]=0$。
				
				证明 $\lim\limits_{x\to x_0}f(x)=0$：
				
				- 思路 1：证 $\lim\limits_{x\to x_0^+}f(x)\leq 0$，$\lim\limits_{x\to x_0^-}f(x)\geq 0$，且极限存在。
				
				- 思路 2：$\lim\limits_{x\to x_0}f(x)\Leftrightarrow \lim\limits_{x\to x_0}|f(x)|=0$，有了绝对值就可以放缩了。
			
			$|F(x+\Delta x)-F(x)|=|\int_x^{x+\Delta x}f(t)\text dt|\leq |M\cdot \Delta x|\to 0$【$f(t)$ 可积，必有界，$|f(x)|\leq M$。再估值不等式】
			
			即 $\lim\limits_{\Delta x\to 0}|F(x+\Delta x)-F(x)|=0$，即  $\lim\limits_{\Delta x\to 0}[F(x+\Delta x)-F(x)]=0$。

	2. 若 $f(x)$ 在 $[a,b]$ 上连续，则函数 $F(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上可导，且 $F'(x)=f(x)$。

- 变限积分求导公式：如果函数 $f(x)$ 在 $[a,b]$ 上连续，$\varphi(x),\psi(x)$ 在 $[a,b]$ 内可导，那么积分限函数 $F(x)=\int_{\psi(x)}^{\varphi(x)}f(t)\text dt$ 在 $[a,b]$ 上可导，其 $F'(x)=f[\varphi(x)]\varphi'(x)-f[\psi(x)]\psi'(x)$。

	即设 $\Phi(x)=\int_{下限}^{上限}f(t)\text dt$，则 $\Phi'(x)=f(上限)\cdot(上限)'-f(下限)\cdot (下限)'$。

	???+ example "例题"
		计算：$\dfrac{\text d}{\text dx}(\int_{e^x}^{x^2+1}\sin t\text dt)$。
  	
		??? note "解答"
		$=\sin(x^2+1)\cdot 2x-\sin(e^x)\cdot e^x$

	小结论：$\int_0^{\alpha(x)}f(t)\text dt\sim \int_0^{ax^m}bt^n\text dt$，$x\to 0$，$\alpha(x)\sim ax^m$，$f(x)\sim bx^n$

	???+ example "例题"
		$\int_0^{\sin x}\ln(1+t^2)\text dt$ 当 $x\to 0$ 是 $x$ 的几阶无穷小。
  	
		??? note "解答"
			$\sim \int_0^x t^2\text dt=\dfrac 1 3 x^3$


		计算：$\lim\limits_{x\to 0}\dfrac{x^2-\int_0^{x^2}\cos t^2\text dt}{\sin^{10}x}$。
	
		??? note "解答"
			- **法 1：**洛必达（$\dfrac 0 0$）
			
				$I=\lim\limits_{x\to 0}\dfrac{2x-\cos(x^2)^2\cdot 2x}{10\cdot x^9}=\lim\limits_{x\to 0}\dfrac{1-\cos x^4}{5x^8}=\lim\limits_{x\to 0}\dfrac{\frac 1 2 (x^4)^2}{5x^8}=\dfrac 1 {10}$
				
			- **法 2：**
				
				$I=\lim\limits_{x\to 0}\dfrac{\int_0^{x^2}(1-\cos t^2)\text dt}{x^{10}}=\lim\limits_{x\to 0}\dfrac{\int_0^{x^2}\frac 1 2 t^4\text dt}{x^{10}}=\lim\limits_{x\to 0}\dfrac{\frac 1 2 \cdot \frac 1 5 x^5\vert_0^{x^2}}{x^{10}}=\dfrac 1{10}$


	注：其中 $x$ 为求导变量，$t$ 为积分变量，只有当被积函数为关于 $t$ 的一元函数，$x$ 仅出现在积分限时才能用此求导公式。否则，若被积函数含 $x$，则需通过恒等变形将 $x$ 移出，才能用此求导公式。
	
	???+ example "例题"
		设函数 $g(x)$ 连续，且 $f(x)=\dfrac 1 2 \int_0^x(x-t)^2 g(t)\text dt$，求 $f'(x)$。
		
		??? note "解答"
			$f(x)=\dfrac 1 2\int_0^x (x^2-2xt+t^2)g(t)\text dt$【对 $t$ 积分，$x$ 当常数】$=\dfrac 1 2 (x^2\int_0^x g(t)\text dt-2x\int_0^x tg(t)\text dt+\int_0^x t^2g(t)\text dt)$
			
			$f'(x)=\dfrac 1 2[2x\int_0^x g(t)\text dt+x^2\cdot g(x)\cdot 1-2\int_0^x tg(t)\text dt-2x\cdot xg(x)\cdot 1+x^2g(x)\cdot 1]=x\int_0^x g(t)\text dt-\int_0^x tg(t)\text dt$

- 牛顿-莱布尼兹公式（微积分基本公式）：如果函数 $F(x)$ 是连续函数 $f(x)$ 在区间 $[a,b]$ 上的一个原函数，则 $\int_a^b f(x)\text dx=F(b)-F(a)$。

	??? note "证明"
		$\Phi(x)=\int_a^x f(t)\text dt$ 是 $f(x)$ 的一个原函数，又 $F(x)$ 也是一个原函数，则 $F(x)-\Phi(x)=c$，代入 $x=a$ 得 $F(a)-\Phi(a)=F(a)-0=F(a)=c$。
		
		即 $\Phi(x)=F(x)-F(a)$。代入 $x=b$ 得 $F(b)-F(a)=\int_a^b f(x)\text dx$。
	
	两个常用公式：$\int_a^b f'(x)\text dx=f(b)-f(a)$，$\int_a^b \text dF(x)=F(b)-F(a)$。

### 定积分的换元法

- 定理：设 $f(x)$ 在 $[a,b]$ 上连续，单值函数 $x=\varphi(t)$ 满足 ① $\varphi(\alpha)=a$，$\varphi(\beta)=b$；② $\varphi'(t)$ 在 $[a,b]$ 上连续，且 $x=\varphi(t)$ 的值域 $R_{\varphi}\subset[a,b]$，则有 $\int_a^b f(x)\text dx=\int_{\alpha}^{\beta}f[\varphi(t)]\varphi'(t)\text dt$。

	注：① 作变量替换的同时，一定要替换定积分的上下限；② 当 $x=\varphi(t)$ 值域 $R_{\varphi}$ 超出 $[a,b]$，但 $\varphi(t)$ 满足其他条件，只要 $f(x)$ 在 $R_{\varphi}$ 上连续，则上述结论依然成立。
	
	???+ example "例题"
		计算 $\int_0^{\frac{\pi}2}\cos^5 x\cdot \sin x\text dx$。
		
		??? note "解答"
			- **法 1：**$I=-\int_0^{\frac {\pi}2}\cos^5 \text d(\cos x)=-\int_1^0 t^5\text dt=\int_0^1 t^5\text dt=\dfrac 1 6 t^6\vert_0^1=\dfrac 1 6$
			
				换字母必换限。
			
			- **法 2：**$I=-\int_0^{\frac{\pi}2}\cos^5\text d(\cos x)=-\dfrac 1 6\cos^t x\vert_0^{\frac{\pi}2}=\dfrac 1 6$
			
				不换字母就不换限。

### 定积分的分部积分法

- 设 $u(x),v(x)$ 在 $[a,b]$ 上连续可导（即 $v'(x),u'(x)$ 在 $[a,b]$ 上连续），则 $\int_a^b u(x)v'(x)\text dx=v(x)u(x)\vert_a^b-\int_a^b v(x)u'(x)\text dx$。

### 定积分的常用公式

- 对称区间上积分

	若函数 $f(x)$ 在对称区间 $[-a,a]\,(a>0)$ 上连续，则
	
	① 当 $f(x)$ 为奇函数时，$\int_{-a}^af(x)\text dx=0$；
	
	② 当 $f(x)$ 为偶函数时，$\int_{-a}^a f(x)\text dx=2\int_0^a f(x)\text dx$；
	
	③ $\int_{-a}^a f(x)\text dx=\int_0^a[f(x)+f(-x)]\text dx$。
	
	???+ example "例题"
		计算：
		
		$\int_{-1}^1 xe^{-x^2}\text dx$
		
		$\int_{-1}^1 (x^2)^{\frac 3 2}\text dx$
		
		$\int_{-1}^1[x^2\ln(x+\sqrt{1+x^2})+(x^2+1)\sqrt{1-x^2}]\text dx$
		
		$\int_{-\frac{\pi}2}^{\frac{\pi}2}\dfrac{\sin^2 x}{1+e^x}\text dx$
		
		??? note "解答"
			
			- $y=xe^{-x^2}$ 是奇函数，$I=0$
			
			- $I=\int_{-1}^1 |x|^3\text dx=2\int_0^1 x^3\text dx=2\cdot \dfrac 1 4 x^4\vert_0^1=\dfrac 1 2$
			
			- $y=x^2\ln(x+\sqrt{1+x^2})$ 是奇函数，$y=\sqrt{1-x^2}$ 是半圆
			
				$\begin{aligned}I&=0+(2\int_0^1 x^2\sqrt{1-x^2}\text dx+\int_{-1}^1\sqrt{1-x^2}\text dx)\\&\xlongequal{x=\sin t}2\int_0^{\frac{\pi}2}\sin^2 t\cos t\cdot \cos t\text dt+\dfrac 1 2\pi\\&=2\int_0^{\frac{\pi}2}\sin^2 t(1-\sin^2 t)\text dt+\dfrac{\pi}2=2(\int_0^{\frac{\pi}2}\sin^2 t\text dt-\int_0^{\frac{\pi}2}\sin^4\text dt)+\dfrac{\pi}2\\&=2(\dfrac 1 2\cdot\dfrac{\pi}2-\dfrac 3 4\cdot\dfrac 1 2\cdot\dfrac{\pi}2)+\dfrac{\pi}2\\&=\dfrac 5 8\pi\end{aligned}$
			
			- $\int_{-a}^a f(x)\text dx=\int_0^a[f(x)+f(-x)]\text dx$
			
				$\begin{aligned}I&=\int_0^{\frac{\pi}2}(\dfrac{\sin^2 x}{1+e^x}+\dfrac{\sin^2(-x)}{1+e^{-x}})\text dx\\&=\int_0^{\frac{\pi}2}(\dfrac{\sin^2 x}{1+e^x}+\dfrac{(\sin^2 x)e^x}{e^x+1})\text dx\\&=\int_0^{\frac{\pi}2}\dfrac{\sin^2(e^x+1)}{e^x+1}\text dx\\&=\int_0^{\frac{\pi}2}\sin^2 x\text dx\\&=\dfrac 1 2\cdot\dfrac{\pi}2=\dfrac{\pi}4\end{aligned}$

- 区间再现公式

	设 $f(x)$ 为连续函数，则 $\int_a^b f(x)\text dx=\int_a^b f(a+b-x)\text dx$（$=\dfrac 1 2 \int_a^b [f(x)+f(a+b-x)]\text dx$）。
	
	??? note "证明"
		$\int_a^b f(x)\text dx\xlongequal{x=a+b-u}\int_b^a f(a+b-u)\text d(a+b-u)=-\int_b^a f(a+b-u)\text du=\int_a^b f(a+b-u)\text du=\int_a^b f(a+b-x)\text dx$
	
	???+ example "例题"
		计算：
		
		$\int_0^1 (1-x)^3\text dx$
		
		$\int_0^1 x(1-x)^3\text dx$
		
		$\dfrac{\text d}{\text dx}\int_0^x tf(x-t)\text dt$
		
		??? note "解答"
			- $I=\int_0^1 x^3\text dx=\dfrac 1 4$
			
			- $I=\int_0^1 x(1-x)^3\text dx=\int_0^1 (1-x)x^3\text dx=\dfrac 1 4-\dfrac 1 5=\dfrac 1 {20}$
			
			- $I=\int_0^x tf(x-t)\text dt=\int_0^x(x-t)f(t)\text dt=x\int_0^x f(t)\text dt-\int_0^x tf(t)\text dt$
			
				$(\int_0^x tf(x-t)\text dt)_x'=\int_0^x f(t)\text dt+xf(x)-xf(x)=\int_0^x f(t)\text dt$

- 三角函数积分变换公式

	设 $f(x)$ 在区间 $[0,1]$ 上连续，则
	
	- $\int_0^{\frac{\pi}2}f(\sin x)\text dx=\int_0^{\frac\pi 2}f(\cos x)\text dx$
	
		??? note "证明"
			由区间再现公式，$\int_0^{\frac{\pi}2}f(\sin x)\text dx=\int_0^{\frac\pi 2}f(\sin(\dfrac{\pi}2-x))\text dx=\int_0^{\frac\pi 2}f(\cos x)\text dx$
	
	- $\int_0^{\pi}f(\sin x)\text dx=2\int_0^{\frac\pi 2}f(\sin x)\text dx$，$\int_0^{\pi}f(|\cos x|)\text dx=2\int_0^{\frac\pi 2}f(\cos x)\text dx$
	- $\int_0^{\pi}xf(\sin x)\text dx=\dfrac{\pi}2\int_0^{\pi}f(\sin x)\text dx$（$=\dfrac{\pi}2\cdot 2\int_0^{\frac\pi 2}f(\sin x)\text dx=\pi\int_0^{\frac\pi 2}f(\sin x)\text dx$）
	
		??? note "证明"
			由区间再现公式，$\int_0^{\pi}xf(\sin x)\text dx=\int_0^{\pi}(\pi-x)f(\sin(\pi-x))\text dx=\pi\int_0^{\pi}f(\sin x)\text dx-\int_0^{\pi}xf(\sin x)\text dx$
			
			$\Rightarrow \int_0^{\pi}xf(\sin x)\text dx=\dfrac{\pi}2\int_0^{\pi}f(\sin x)\text dx$
		
		注：在 $[0,\pi]$ 上 $f(\cos^2 x),f(|\cos x|)$ 可以看作 $f(\sin x)$，$f(\cos x)$ 不可看作 $f(\sin x)$。
		
		???+ example "例题"
			计算：$\int_0^{\pi}x\sin^4 x\text dx$。
			
			??? note "解答"
				$\int_0^{\pi}xf(\sin x)\text dx$
				
				$I=\dfrac{\pi}2\int_0^{\pi}\sin^4 x\text dx=\dfrac\pi 2\cdot 2\int_0^{\frac\pi 2}\sin^4 x\text dx=\pi\cdot\dfrac 3 4\cdot\dfrac 1 2\cdot\dfrac{\pi}2=\dfrac 3 {16}\pi^2$

	- 华理士公式：$\int_0^{\frac\pi 2}\sin^n x\text dx=\int_0^{\frac \pi 2}\cos^n x\text dx=\begin{cases}\dfrac{(n-1)!!}{n!!}\cdot\dfrac\pi 2,&n\geq 2\land 2\mid n\\\dfrac{(n-1)!!}{n!!},&n\geq 3\land 2\nmid n\end{cases}$
	- $\int_0^{2\pi}\sin^n x\text dx=\int_0^{2\pi}\cos^n x\text dx=\begin{cases}4\int_0^{\frac\pi 2}\sin^n x\text dx,&2\mid n\\0,&2\nmid n\end{cases}$

- 周期函数积分

	设 $f(x)$ 是以 $T$ 为周期的连续函数，即 $f(x+T)=f(x)$，则 $\int_a^{a+T}f(x)\text dx=\int_0^T f(x)\text dx$（$=\int_{-\frac T 2}^{\frac T 2}f(x)\text dx$）。
	
	更一般地，有 $\int_a^{a+nT}f(x)\text dx=n\int_0^T f(x)\text dx$。
	
	???+ example "例题"
		计算：$\int_0^{n\pi}\sqrt{1+\sin 2x}\text dx$。
		
		??? note "解答"
			$I=n\int_0^{\pi}\sqrt{1+\sin 2x}\text dx$
			
			【$\sqrt{1+\sin 2x}=\sqrt{(\sin x+\cos x)^2}=|\sin x+\cos x|=|\sqrt 2\sin(x+\dfrac\pi 4)|$】
			
			$=\sqrt 2 n\int_0^{\pi}|\sin(x+\dfrac\pi 4)|\text d(x+\dfrac\pi 4)$
			
			$\xlongequal{t=x+\frac\pi 4}\sqrt 2 n\int_{\frac\pi 4}^{\frac 5 4 \pi}|\sin t|\text dt$
			
			$=\sqrt 2 n\int_0^{\pi}|\sin t|\text dt=2\sqrt 2 n$

- 例题

	???+ example "例题"
		设 $f(x)$ 是连续函数，且 $f(x)=x+2\int_0^1 f(t)\text dt$，求 $f(x)$。
		
		??? note "解答"
			设 $A=\int_0^1 f(t)\text dt$，则 $f(x)=x+2A$。
			
			$f(x)=x+2A$ 两端从 $0$ 到 $1$ 积分，则 $\int_0^1 f(x)\text dx=\int_0^1 (x+2A)\text dx$，即 $A=\dfrac 1 2+2A$，得 $A=-\dfrac 1 2$，$f(x)=x-1$。
		
		计算：$\int_{-\frac\pi 2}^{\frac\pi 2}(x+1)\min\{\dfrac 1 2,\cos x\}\text dx$。
		
		??? note "解答"
			$y=x\min\{\dfrac 1 2,\cos x\}$ 是奇函数
			
			$\begin{aligned}I&=2\int_0^{\frac\pi 2}\min\{\dfrac 1 2,\cos x\}\text dx\\&=2(\int_0^{\frac\pi 3}\dfrac 1 2\text dx+\int_{\frac\pi 3}{\frac\pi 2}\cos x\text dx)\\&=2(\dfrac 1 2\cdot\dfrac{\pi}3+\sin\big\vert_{\frac\pi 3}^{\frac\pi 3})\\&=\dfrac\pi 3+2-\sqrt 3\end{aligned}$
		
		设 $f(x)=\begin{cases}1+x^2,&x\leq 0\\e^{-x},&x>0\end{cases}$，求 $\int_1^3 f(x-3)\text dx$。
		
		??? note "解答"
			$\begin{aligned}I&=\int_1^3 f(x-3)\text d(x-3)\\&\xlongequal{t=x-2}\int_{-1}^1 f(t)\text dt\\&=\int_{-1}^0 f(t)\text dt+\int_0^1 f(t)\text dt\\&=\int_{-1}^0(1+t^2)\text dt+\int_0^1e^{-t}\text dt\\&=(t+\dfrac 1 3 t^3)\big\vert_{-1}^0-e^{-t}\big\vert_0^1\\&=0-(-\dfrac 4 3)-e^{-1}+1\\&=\dfrac 7 3-e^{-1}\end{aligned}$
		
		设 $f(x)=\begin{cases}x^2,&1\leq x\leq 2\\x,&0\leq x<1\end{cases}$，求 $F(x)=\int_0^x f(t)\text dt$，$x\in[0,2]$。
		
		??? note "解答"
			- **法 1：**
			
				当 $0\leq x<1$ 时，$F(x)=\int_0^x f(t)\text dt=\int_0^x t\text dt=\dfrac 1 2 t^2\vert_0^x=\dfrac 1 2 x^2$。
			
				当 $1\leq x<2$ 时，$F(x)=\int_0^x f(t)\text dt=\int_0^1 t\text dt+\int_1^x t^2\text dt=\dfrac 1 2t^2\vert_0^1+\dfrac 1 3 t^3\vert_1^x=\dfrac 1 2+\dfrac 1 3 x^3-\dfrac 1 3=\dfrac 1 3 x^3+\dfrac 1 6$。
				
				$F(x)=\int_0^x f(t)\text dt=\begin{cases}\dfrac 1 2 x^2,&0\leq x<1\\\dfrac 1 3 x^3+\dfrac 1 6,&1\leq x\leq 2\end{cases}$
				
			- **法 2：**
				
				???+ abstract
					$F(x)$ 是 $f(x)$ 的原函数之一，所以也可以先用不定积分求全体原函数，再由 $F(0)=0$，得到 $C=0$。
				
				$F(x)$ 是 $f(x)$ 在 $[0,2]$ 上的一个原函数，则 $F(x)+C$ 是 $f(x)$ 在 $[0,2]$ 上的全部原函数。
				
				$\int f(x)\text dx=\begin{cases}\dfrac 1 2 x^2+C,&0\leq x<1\\\dfrac 1 3 x^3+C+\dfrac 1 6,&1\leq x\leq 2\end{cases}$
				
				代入 $F(0)=0$ 得 $C=0$。

## 反常积分

### 反常积分的定义

- 定积分 $\int_a^b f(x)\text dx$ 的积分区间 $[a,b]$ 是有限区间，又 $f(x)$ 在 $[a,b]$ 上是有界的，如果积分区间推广到无穷区间或 $f(x)$ 推广到无界函数，就是两种不同类型的反常积分。

	- 无穷区间上的反常积分
		
		- 积分区间 $[a,+\infty)$：设函数 $f(x)$ 在区间 $[a,+\infty)$ 上连续，若 $\lim\limits_{t\to +\infty}\int_a^t f(x)\text dx$ 存在，则称此极限为 $f(x)$ 在无穷区间 $[a,+\infty)$ 上的反常积分，记作 $\int_a^{+\infty}f(x)\text dx$，即
		
			$\int_a^{+\infty}f(t)\text dt=\lim\limits_{t\to +\infty}\int_a^t f(x)\text dx$（$=\lim\limits_{t\to +\infty}[F(t)-F(a)]=F(+\infty)-F(a)$）
			
			此时也称反常积分 $\int_a^{+\infty}f(t)\text dt$ 收敛。若上述极限不存在，则称反常积分 $\int_a^{+\infty}f(x)\text dx$ 发散。
			
			???+ example "例题"
				计算：$\int_1^{+\infty}\dfrac 1 {x^2}\text dx$。
				
				??? note "解答"
					$I=(-\dfrac 1 x)\vert_1^{+\infty}=\lim\limits_{x\to +\infty}(-\dfrac 1 x)-(-1)=1$

		- 积分区间 $(-\infty,b]$：设函数 $f(x)$ 在区间 $(-\infty,b]$ 上连续，若极限 $\lim\limits_{t\to-\infty}\int_t^b f(x)\text dx$ 存在，则称此极限为 $f(x)$ 在无穷区间 $(-\infty,b]$ 上的反常积分，记作 $\int_{-\infty}^b f(x)\text dx$，即

			$\int_{-\infty}^b f(x)\text dx=\lim\limits_{t\to -\infty}\int_t^b f(x)\text dx$（$=F(b)-F(-\infty)$）
			
			此时也称为反常积分 $\int_{-\infty}^b f(x)\text dx$ 收敛。若上述极限不存在，则称反常积分 $\int_{-\infty}^b f(x)\text dx$ 发散。
		
		- 积分区间 $(-\infty,+\infty)$：设函数 $f(x)$ 在区间 $(-\infty,+\infty)$ 上连续，若反常积分 $\int_{-\infty}^a f(x)\text dx$ 和 $\int_a^{+\infty}f(x)\text dx$ 都收敛，则称上述两反常积分之和为 $f(x)$ 在无穷区间 $(-\infty,+\infty)$ 上的反常积分，记作 $\int_{-\infty}^{+\infty}f(x)\text dx$，即
		
			$\int_{-\infty}^{+\infty}f(x)\text dx=\int_{-\infty}^a f(x)\text dx+\int_a^{+\infty}f(x)\text dx=\lim\limits_{t\to -\infty}\int_t^a f(x)\text dx+\lim\limits_{t\to +\infty}\int_a^t f(x)\text dx$
			
			这是也称反常积分 $\int_{-\infty}^{+\infty}f(x)\text dx$ 收敛。否则，称反常积分 $\int_{-\infty}^{+\infty}f(x)\text dx$ 发散。
