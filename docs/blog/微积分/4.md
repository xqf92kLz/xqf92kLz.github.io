## 知识点

### 不定积分的概念

- 原函数：设 $f(x)$ 在区间 $I$ 上有定义，若存在可导函数 $F(x)$ 满足 $\forall x\in I,F'(x)=f(x)$，则称 $F(x)$ 为 $f(x)$ 在区间 $I$ 上的一个原函数。

	???+ info "原函数的存在性-不定积分的可积"
		- 连续函数一定存在原函数。（非连续函数也可能有原函数）
  	

		- 含第一类间断点的函数，不存在原函数。（含第二类间断点的函数，可能存在原函数。如 $F(x)=\begin{cases}x^2\sin\frac 1 x&(x\neq 0)\\0&(x=0)\end{cases}$，设 $f(x)=F'(x)$，则 $x=0$ 是 $f(x)$ 的第二类间断点，但其存在原函数 $F(x)$）

- 不定积分：$f(x)$ 的所有原函数组成的集合称为 $f(x)$ 的不定积分，记作 $\int f(x)\text dx$。若 $F'(x)=f(x)$，则 $\int f(x)\text dx=F(x)+C$，其中，$f(x)$ 称为被积函数，$f(x)\text dx$ 称为被积表达式，$x$ 称为积分变量，$C$ 称为积分常数，$\int$ 称为不定积分号。

- 不定积分的性质

	若 $f(x),g(x)$ 在区间 $I$ 上存在原函数 $F(x),G(x)$，则
	
	- $[\int f(x)\text dx]'=f(x)$
	- $\int F'(x)\text dx=F(x)+C$
	- $\int [f(x)+g(x)]\text dx=\int f(x)\text dx+\int g(x)\text dx$
	- $\int kf(x)\text dx=k\int f(x)\text dx$

- 基本积分

	$\int \text dx=x+C$
	
	$\int x^{\alpha}\text dx=\frac{x^{\alpha +1}}{\alpha+1}+C\,(\alpha\neq -1)$，$\int \frac 1 x \text dx=\ln |x|+C$，$\int a^x\text dx=\frac{a^x}{\ln a}+C\,(a>0,a\neq 1)$，$\int e^x\text dx=e^x+C$
	
	$\int \cos x\text dx=\sin x+C$，$\int \sin x\text dx=-\cos x+C$，$\int \sec^2 x\text dx=\tan x+C$，$\int \sec x\tan x\text dx=\sec x+C$，$\int \csc^2 x\text dx=-\cot x+C$，$\int \csc x\cot x\text dx=-\csc x+C$
	
	$\int \frac{\text dx}{\sqrt{1-x^2}}=\arcsin x+C$ 或 $-\arccos x+C$，$\int \frac{\text dx}{1+x^2}=\arctan x+C$ 或 $-\text{arccot }x+C$
	
	$\int \text{sinh }x\text dx=\text{cosh }x+C$，$\int \text{cosh }x\text dx=\text{sinh }x+C$

	??? example "例题-直接积分法"
		计算：（1）$\int \dfrac{x^3+3x^2+x-3}{x^2+1}\text dx$；（2）$\int (e^{2x}\pi^x)\text dx$；（3）$\int \sqrt{x\sqrt[3]{x^2}}\text dx$。
		
		??? note "解答"
			（1）$=\int \dfrac{(x^3+x)+(3x^2+3)-6}{x^2+1}\text dx=\int (x+3-\dfrac 6 {x^2+1})\text dx=\dfrac 1 2 x^2+3x-6\arctan x+C$
		
			（2）$=\int (e^2\pi)^x\text dx=\dfrac{(e^2\pi)^x}{\ln(e^2\pi)}+C$
			
			（3）$=\int x^{\frac 5 6}\text dx=\dfrac 6 {11} x^{\frac {11} 6}+C$
		
		计算：（1）$\int \sin^2\frac x 2\text dx$；$\int \dfrac{1}{\sin^2 x\cos^2 x}\text dx$；（3）$\int \tan^2 x\text dx$。
		
		??? note "解答"
			（1）$=\int \dfrac{1-\cos x}2\text dx=\dfrac 1 2 (x-\sin x)+C$
		
			（2）$=\int\dfrac{\sin^2 x+\cos^2 x}{\sin^2 x\cos^2 x}\text dx=\int \sec^2 x\text dx+\int \csc^2 x\text dx=\tan x-\cot x+C$
			
			（3）$=\int (\sec^2 x-1)\text dx=\tan x-x+C$
		
		**分段函数的积分：**注意 $F(x)$ 可导 $\Rightarrow$ $F(x)$ 连续
		
		设 $f(x)=\begin{cases}\cos x-x^2+1&(x\leq 0)\\2e^x&(x>0)\end{cases}$，求：$\int f(x)\text dx$。
		
		??? note "解答"
			由于 $f(x)$ 在 $(-\infty,+\infty)$ 上连续，则 $f(x)$ 的原函数存在。
			
			- 当 $x\leq 0$ 时，$\int f(x)\text dx=\int (\cos x-x^2+1)\text dx=\sin x-\dfrac 1 3 x^3+x+C_1$。
			- 当 $x>0$ 时，$\int f(x)\text dx=\int 2e^x\text dx=2e^x+C_2$。
			
			故 $F(x)=\begin{cases}\sin x-\frac 1 3 x^3+x+C_1&(x\leq 0)\\2e^x+C_2&(x>0)\end{cases}$。
			
			由于 $F(x)$可导，故 $F(x)$ 在 $(-\infty,+\infty)$ 上连续。而 $F(0-0)=C_1$，$F(0+0)=2+C_2$，则 $C_1=C_2+2$。
			
			故 $F(x)=\begin{cases}\sin x-\frac 1 3 x^3+x+C+2&(x\leq 0)\\2e^x+C&(x>0)\end{cases}$。
		
		???+ warning "注意"
			分段函数的积分，要确保原函数在分界点处的连续性。
	
### 不定积分的几种基本方法

- 凑微分法（第一换元法）

	设 $F(u)$ 可导，$F'(u)=f(u)$，$u=\varphi(x)$ 可导，则 $\int f(\varphi(x))\varphi'(x)\text dx=\int f(\varphi(x))\text d(\varphi(x))=F(\varphi(x))+C$。
	
	??? note "证明"
		由于 $[F(\varphi(x))]'=F'(\varphi(x))\varphi'(x)=f(\varphi(x))\varphi'(x)$，所以 $\int f(\varphi(x))\varphi'(x)\text dx=F(\varphi(x))+C$。
	
	常见的凑微分公式
	
	$\text dx=\frac 1 a \text d(ax+b)\,(a\neq 0)$，$e^x\text dx=\text d(e^x)$，$\frac {\text dx} x=\text d(|\ln x|)$
	
	$x\text dx=\frac 1 2 \text d(x^2)=\frac 1 2 \text d(x^2\pm a^2)=-\frac 1 2 \text d(a^2-x^2)$
	
	$\sin x\text dx=-\text d(\cos x)$，$\cos x\text dx=\text d(\sin x)$，$\sec^2 x\text dx=\text d(\tan x)$，$\sec x\tan x\text dx=\text d(\sec x)$
	
	$\frac{\text dx}{1+x^2}=\text d(\arctan x)$，$\frac{\text dx}{\sqrt{1-x^2}}=\text d(\arcsin x)$
	
	$\frac{\text dx}{2\sqrt x}=\text d(\sqrt x)$，$\frac{x}{\sqrt{a^2\pm x^2}}\text dx=\frac{\text d(x^2)}{2\sqrt{a^2\pm x^2}}=\pm \text d(\sqrt{a^2\pm x^2})$
	
	$\int \frac{\text dx}{ax+b}=\frac 1 a \ln|ax+b|+C\,(a\neq 0)$
	
	$\int \frac{\text dx}{x^2-a^2}=\frac 1 {2a}\ln|\frac{x-a}{x+a}|+C$，$\int \frac{\text dx}{x^2+a^2}=\frac 1 a\arctan \frac x a+C$
	
	??? note "证明"
		$\int \dfrac{\text dx}{x^2-a^2}=\dfrac 1 {2a}\int (\dfrac 1 {x-a}-\dfrac 1{x+a})\text dx=\dfrac 1 {2a}\ln|\dfrac{x-a}{x+a}|+C$
		
		$\int \dfrac{\text dx}{x^2+a^2}=\dfrac 1 {a^2}\cdot a\cdot \int \dfrac{\text d(\frac x a)}{(\frac x a)^2+1}=\dfrac 1 a \arctan \dfrac x a+C$
	
	$\int \frac{\text dx}{\sqrt{a^2-x^2}}=\arcsin \frac x a+C\,(a>0)$
	
	$\int \tan x\text dx=-\ln|\cos x|+C$，$\int \cot x\text dx=\ln|\sin x|+C$
	
	??? note "证明"
		$\int \tan x\text dx=\int \dfrac{\sin x}{\cos x}\text dx=-\int \dfrac{\text d(\cos x)}{\cos x}=-\ln |\cos x|+C$
		
		$\int \cot x\text dx=\int \dfrac{\cos x}{\sin x}\text dx=\int\dfrac{\text d(\sin x)}{\sin x}=\ln|\sin x|+C$
	
	$\int \sec x\text dx=\ln|\sec x+\tan x|+C=-\ln|\sec x-\tan x|+C$
	
	$\int \csc x\text dx=\ln|\csc x-\cot x|+C=-\ln|\csc x+\cot x|+C$
	
	??? note "证明"
		- **法 1：**
		
			$=\int \dfrac {\text dx}{\cos x}=\int \dfrac{\cos x\text dx}{\cos^2 x}=\int \dfrac{\text d(\sin x)}{1-\sin^2 x}=\dfrac 1 2 \ln\dfrac{1+\sin x}{1-\sin x}+C$
			
			注：$\dfrac 1 2 \ln\dfrac{1+\sin x}{1-\sin x}=\dfrac 1 2 \ln\dfrac{(1+\sin x)^2}{1-\sin^2 x}=\ln\dfrac{1+\sin x}{\cos x}=\ln|\sec x+\tan x|$
			
		- **法 2：**
		
			$=\int \dfrac{\text dx}{\sin(x+\frac{\pi}2)}=\int \dfrac{\text dx}{2\sin (\frac x 2+\frac{\pi}4)\cos(\frac x 2+\frac{\pi}4)}=\int \dfrac{\sec^2 (\frac x 2 +\frac{\pi}4)\text d(\frac x 2+\frac{\pi}4)}{\tan (\frac x 2+\frac{\pi}4)}=\ln|\tan(\frac x 2+\frac{\pi}4)|+C$
		
		- **法 3：**
		
			$=\int\dfrac{\sec x(\sec x+\tan x)}{\sec x+\tan x}\text dx=\int \dfrac{\text d(\sec x+\tan x)}{\sec x+\tan x}=\ln|\sec x+\tan x|+C$
	
	
	$\int\frac{\text dx}{\sqrt{x^2+a^2}}=\ln(x+\sqrt{x^2+a^2})+C\,(a>0)$，$\int \frac{\text dx}{\sqrt{x^2-a^2}}=\ln|x+\sqrt{x^2-a^2}|+C\,(a>0)$
	
	??? note "证明"
		- 设 $x=a\tan t$，则 $\text dx=a\sec^2 t\text dt$。
		
            $\int \dfrac{1}{\sqrt{x^2+a^2}}\text dx=\int \dfrac{1}{a\sec t}\cdot a\sec^2 t\text dt=\int \sec t\text dt=\ln|\sec x+\tan x|+C=\ln|\dfrac x a +\dfrac{\sqrt{x^2+a^2}}a|+C=\ln(x+\sqrt{x^2+a^2})+C$

		- 设 $x=a\sec t$，则 $\text dx=a\sec t\tan t\text dt$。
		
			$\int \dfrac 1 {\sqrt {x^2-a^2}}\text dx=\int \dfrac{1}{a\tan t}\cdot a\sec t\tan t\text dt=\int \sec t\text dt=\ln|\sec t+\tan t|+C=\ln|\dfrac x a+\dfrac{\sqrt{x^2-a^2}}a|+C=\ln|x+\sqrt{x^2-a^2}|+C$

	$\int \sqrt{a^2-x^2}\text dx=\frac x 2\sqrt{a^2-x^2}+\frac{a^2}2\arcsin\frac x a+C\,(a>0)$
	
	??? note "证明"
		设 $x=a\sin t$，则 $\text dx=a\cos t\text dt$。
		
		$\int \sqrt{a^2-x^2}\text dt=\int a\cos t\text a\cos t\text dt=a^2\int \cos^2 t\text dt=\dfrac{a^2}2\int (1+\cos 2t)\text dt=\dfrac{a^2}2(t+\dfrac 1 2 \sin 2t)+C=\dfrac{a^2}2t+\dfrac{a^2}2\sin t\cos t+C=\dfrac{a^2}2\arcsin \dfrac x a+\dfrac x 2 \sqrt{a^2-x^2}+C$
	
	$\int \sqrt{x^2\pm a^2}\text dx=\frac x 2\sqrt{x^2\pm a^2}+\frac{a^2}2\ln(x+\sqrt{x^2\pm a^2})+C\,(a>0)$
	
	$\int \sec^3 x\text dx=\frac 1 2\sec x\tan x+\frac 1 2\ln|\sec x+\tan x|+C$
	
	??? example "例题"
		计算：（1）$\int \sin^2 x\cos x\text dx$；（2）$\int \dfrac{e^x}{1+e^{2x}}\text dx$；（3）$\int \dfrac{x}{1+x^2}\text dx$；（4）$\int (2x-1)^{2024}\text dx$；（5）$\int \dfrac{x+\arcsin x}{\sqrt{1-x^2}}\text dx$。
		
		??? note "解答"
			（1）$=\int \sin^2 x\text d(\sin x)=\dfrac  3 \sin^3 x+C$
			
			（2）$=\int \dfrac{\text d(e^x)}{1+(e^x)^2}=\arctan e^x+C$
			
			（3）$=\int \dfrac{\text d(1+x^2)}{1+x^2}=\dfrac 1 2\ln(1+x^2)+C$
			
			（4）$=\dfrac 1 2 \int (2x-1)^{2024}\text d(2x-1)=\dfrac 1 {4050}(2x-1)^{2025}+C$
			
			（5）$=\int \dfrac{x}{\sqrt{1-x^2}}\text dx+\int\dfrac{\arcsin x}{\sqrt{1-x^2}}\text dx=-\dfrac 1 2 \int\dfrac{\text d(1-x^2)}{\sqrt{1-x^2}}+\int \arcsin x\text d(\arcsin x)=-\sqrt{1-x^2}+\dfrac 1 2 (\arcsin x)^2+C$
	
		计算：$\int \dfrac{\text dx}{a^2\sin^2 x+b^2\cos^2 x}\,(ab\neq 0)$
		
		??? note "解答"
			$=\int \dfrac{1}{\cos^2 x}\cdot \dfrac{\text dx}{a^2\tan^2 x+b^2}=\int \dfrac{\text d(\tan x)}{a^2\tan^2 x+b^2}=\dfrac 1 {b^2}\cdot \dfrac b a\cdot \int \dfrac{\text d(\frac a b \tan x)}{(\frac a b\tan x)^2 x+1}=\dfrac 1 {ab}(\arctan \dfrac a b \tan x)+C$
		
		计算：$\int \dfrac{\sin x}{a\cos x+b\sin x}\text dx\,(a^2+b^2\neq 0)$。
		
		??? note "解答"
			记 $I=\int \dfrac{\sin x}{a\cos x+b\sin x}\text dx$，$J=\int \dfrac{\cos x}{a\cos x+b\sin x}\text dx$，则：
			
			$\begin{cases}bI+aJ=\int \dfrac{b\sin x+a\cos x}{a\cos x+b\sin x}\text dx=x+C\\-aI+bJ=\int \dfrac{-a\sin x+b\cos x}{a\cos x+b\sin x}\text dx=\int \dfrac{\text d(a\cos x+b\sin x)}{a\cos x+b\sin x}=\ln|a\cos x+b\sin x|+C\end{cases}$
			
			$\Rightarrow \begin{cases}I=\dfrac{1}{a^2+b^2}(bx-a\ln|a\cos x+b\sin x|)+C\\J=\dfrac{1}{a^2+b^2}(ax+b\ln |a\cos x+b\sin x|)+C\end{cases}$
			
			注：实际上，就是以 $(a\cos x+b\sin x)$ 与 $(a\cos x+b\sin x)'$ 为基张成空间 $V$，将向量 $\sin x,\cos x$ 表示为 $(a\cos x+b\sin x)$ 与 $(a\cos x+b\sin x)'$ 的线性组合。$\sin x=k_1(a\cos x+b\sin x)+k_2(a\cos x+b\sin x)'$，$\cos x=l_1(a\cos x+b\sin x)+l_2(a\cos x+b\sin x)'$。

- 变量代换法（第二换元法）

	设 $f(x)$ 连续，$x=\varphi(t)$ 有连续导数，且 $\varphi'(t)\neq 0$，若 $\int f(\varphi(t))\varphi'(t)\text dt=F(t)+C$，则 $\int f(x)\text dx=\int f(\varphi(t))\varphi'(t)\text dt=F(t)+C=F(\varphi^{-1}(x))+C$，其中 $t=\varphi^{-1}(x)$ 为 $x=\varphi(t)$ 的反函数。
	
	??? note "证明"
		$\dfrac{\text d}{\text dx}F(\varphi^{-1}(x))=\dfrac{\text d}{\text dt}F(t)\cdot \dfrac{\text dt}{\text dx}=f(\varphi(t))\varphi'(t)\cdot \dfrac{1}{\varphi'(t)}=f(\varphi(t))=f(x)$
	
	??? example "例题"
		计算：（1）$\int \dfrac{\text dx}{1+\sqrt{x+1}}$；（2）$\int \dfrac{x}{\sqrt{x-1}}\text dx$。
		
		??? note "解答"
			（1）设 $\sqrt{x+1}=t$，则 $x=t^2-1$，$\text dx=2t\text dt$。$I=\int \dfrac{2t\text dt}{1+t}=2\int (1-\dfrac{1}{t+1})\text dt=2t-2\ln|t+1|+C=2\sqrt{x+1}-2\ln(\sqrt{x+1}+1)+C$
			
			（2）设 $\sqrt{x-1}=t$，则 $x=t^2+1$，$\text dx=2t\text dt$。$I=\int \dfrac{t^2+1}t\cdot 2t\text dt=2\int (t^2+1)\text dt=\dfrac 2 3 t^3+2t+C=\dfrac 2 3 (x-1)^{\frac 3 2}+2\sqrt{x-1}+C$
	
		计算：$\int \dfrac{\text dx}{e^x+1}$。
		
		??? note "解答"
			- **法 1：**
			
				$I=\int \dfrac{e^x\text dx}{e^x(e^x+1)}=\int (\dfrac 1 {e^x}-\dfrac 1 {e^x+1})\text d(e^x)=x-\ln(e^x+1)+C$
				
			- **法 2：**
			
				设 $e^x=t$，则 $x=\ln t$，$\text dx=\dfrac 1 t\text dt$。
				
				$I=\int \dfrac{\frac 1 t \text dt}{t+1}=\int (\dfrac 1 t-\dfrac 1 {t+1})\text dt=\ln t-\ln (t+1)+C=x-\ln(e^x+1)+C$
		
		计算：（1）$\int \dfrac 1 {\sqrt{1+e^x}}\text dx$；（2）$\int \sqrt{1+e^x}\text dx$。
		
		??? note "解答"
			设 $\sqrt{1+e^x}=t$，则 $x=\ln(t^2-1)$，$\text dx=\dfrac{2t}{t^2-1}\text dt$。
			
			（1）$=\int \dfrac 1 t\cdot \dfrac{2t}{t^2-1}\text du=\int (\dfrac 1 {t-1}-\dfrac 1 {t+1})\text du=\ln|\dfrac{t-1}{t+1}|+C=\ln\dfrac{\sqrt{1+e^x}-1}{\sqrt{1+e^x}+1}+C$
			
			（2）$=\int u\cdot \dfrac{2u}{u^2-1}\text du=2\int(1+\dfrac{1}{u^2-1})\text du=2\int (1+\dfrac 1 2 (\dfrac 1 {u-1}-\dfrac 1 {u+1}))\text du=2u+\ln|\dfrac{u-1}{u+1}|+C=2\sqrt{1+e^x}+\ln\dfrac{\sqrt{1+e^x}-1}{\sqrt{1+e^x}+1}+C$
		
		计算：$\int \dfrac{\text dx}{x^2\sqrt{x^2-1}}$。
		
		??? note "解答"
			- **法 1：**（三角变换）
			
				设 $x=\sec t$，则 $\text dx=\sec t\tan t\text dt$。
				
				$I=\int \dfrac{\sec t\tan t\text dt}{\sec^2 t\tan t}=\int \cos t \text dt=\sin t+C=\dfrac{\sqrt{x^2-1}}x+C$
				
			- **法 2：**（倒数变换）
			
				设 $x=\dfrac 1 t$，则 $\text dx=-\dfrac{\text dt}{t^2}$。
				
				$I=\int \dfrac{t^3}{\sqrt{1-t^2}}\cdot (-\dfrac 1 {t^2}\text dt)=-\int \dfrac{t}{\sqrt{1-t^2}}\text dt=\sqrt{1-t^2}+C=\dfrac{\sqrt{x^2-1}}x+C$
		
- 分部积分法

### 某些特殊类型函数的不定积分

- 有理函数的不定积分
- 三角函数有理式的不定积分
- 某些无理函数的不定积分