## 知识点

### 定积分概念

- 定积分的定义

    ???+ warning "注意"
    	不定积分是原函数全体，定积分是一个具体的数值。

	???+ example "例题"
		计算：$\lim\limits_{n\to \infty}\sum_{k=1}^n \dfrac{k}{n^2+k^2+k}$。
		
		??? note "解答"
			???+ abstract
				分母的 $+k$ 几乎不起作用。
				
				$\dfrac{k}{n^2+k^2}=\dfrac{\frac k n}{1+(\frac k n)^2}\cdot \dfrac 1 n$，则 $\lim\limits_{n\to \infty}\sum_{k=1}^n \dfrac{k}{n^2+k^2}$ 可以定积分计算
				
				$\dfrac{k}{n^2+k^2}-\dfrac{k}{n^2+k^2+k}=\dfrac{k^2}{(n^2+k^2+k)(n^2+k^2)}\leq \dfrac{k^2}{n^4}=o(\dfrac 1 {n^2})$，则 $\lim\limits_{n\to \infty}\sum_{k=1}^n (\dfrac{k}{n^2+k^2}-\dfrac{k}{n^2+k^2+k})=0$
			
			$T_n=\sum_{k=1}^n \dfrac{k}{n^2+k^2+k}=\sum_{k=1}^n \dfrac k {n^2+k^2}-\sum_{k=1}^n \dfrac{k^2}{(n^2+k^2)(n^2+k^2+k)}$
			
			而 $\lim\limits_{n\to +\infty}\sum_{k=1}^n \dfrac k {n^2+k^2}=\int_0^1\dfrac x {1+x^2}\text dx=\dfrac 1 2 \ln 2$，$\lim\limits_{n\to +\infty}\sum_{k=1}^n \dfrac{k^2}{(n^2+k^2)(n^2+k^2+k)}=0$
			
			故 $T_n=\dfrac 1 2 \ln 2$。
		
		计算 $\lim\limits_{n\to +\infty}\sum_{k=1}^n \dfrac{\sin\frac{k}{n}\pi}{n+\frac 1 k}$。
		
		??? note "解答"
			???+ abstract
				$\lim\limits_{n\to +\infty}\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 n$ 可以定积分算
				
				$\lim\limits_{n\to +\infty}\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n+1}$ 也可以定积分算
				
				夹逼一下
			
			$\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n+1}\leq \sum_{k=1}^n \sin\dfrac{k}{n}\pi\cdot\dfrac 1{n+\frac 1 k}\leq \sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n}$
			
			$\lim\limits_{n\to +\infty}\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n+1}=\lim\limits_{n\to +\infty}\dfrac n {n+1}\cdot (\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n})=\int_0^1 \sin\pi x\text dx=-(\dfrac 1 \pi\cos\pi x)\big\vert_0^1=\dfrac 2 \pi$
			
			$\lim\limits_{n\to +\infty}\sum_{k=1}^n \sin\dfrac k n \pi\cdot \dfrac 1 {n}=\int_0^1\sin\pi x\text dx=-(\dfrac 1 \pi\cos\pi x)\big\vert_0^1=\dfrac 2 \pi$
			
			则 $\lim\limits_{n\to +\infty}\sum_{k=1}^n \dfrac{\sin\frac{k}{n}\pi}{n+\frac 1 k}=\dfrac 2 \pi$。

- 定积分的几何意义

- 可积函数类
	- 可积的必要条件：若 $f(x)$ 在 $[a,b]$ 上可积，则 $f(x)$ 在 $[a,b]$ 上必有界。
	
		（闭区间上的有界函数不一定可积，如 $D(x)$）
	
	- 可积的充分条件：
	
		- 若 $f(x)$ 在 $[a,b]$ 上连续，则 $f(x)$ 在 $[a,b]$ 上可积。
		- 若 $f(x)$ 在 $[a,b]$ 上有界，且只有有限个间断点，则 $f(x)$ 在 $[a,b]$ 上可积。
		- 若 $f(x)$ 在 $[a,b]$ 上单调，则 $f(x)$ 在 $[a,b]$ 上可积。
	
	???+ warning "注意"
		不定积分可积 ≠ 定积分可积。

### 定积分的性质和基本定理

- 定积分的基本性质

	- 线性性：设 $f(x),g(x)$ 在 $[a,b]$ 上可积，则 $\int_a^b kf(x)\text dx=k\int_a^b f(x)\text dx$，$\int_a^b [f(x)+g(x)]\text dx=\int_a^b f(x)+\int_a^b g(x)\text dx$。
	- 有限可加性：设 $f(x)$ 在 $[a,b]$ 上可积，则对 $\forall c\in[a,b]$，有 $\int_a^b f(x)\text dx=\int_a^c f(x)\text dx+\int_c^b f(x)\text dx$。
	
		常用于分段函数的定积分计算。
	
	- 非负性：设 $f(x)$ 在 $[a,b]$ 上可积，且 $f(x)\geq 0$，则 $\int_a^b f(x)\text dx\geq 0$。
	
		???+ warning "注意"
			这里要 $a\leq b$，否则 $\int_a^b f(x)\leq 0$。
	
		推论 1：若 $f(x),g(x)$ 在 $[a,b]$ 上可积，且对 $\forall x\in[a,b]$ 有 $f(x)\geq g(x)$，则 $\int_a^b f(x)\text dx\geq \int_a^b g(x)\text dx$。
		
		推论 2：若 $f(x)$ 在 $[a,b]$ 上可积，则 $|\int_a^ bf(x)\text dx|\leq \int_a^b |f(x)|\text dx$。
	
	- 估值不等式：若 $f(x)$ 在 $[a,b]$ 上可积，且对 $\forall x\in[a,b]$ 有 $m\leq f(x)\leq M$，则 $m(b-a)\leq \int_a^b f(x)\text dx\leq M(b-a)$。
	
    ???+ example "例题"
        证明：$1\leq \int_0^{\frac\pi 2}\dfrac{\sin x}x\text dx\leq \dfrac\pi 2$。

        ??? note "解答"
            当 $x\in(0,\dfrac\pi 2]$ 时，$\dfrac 2\pi x\leq \sin x\leq 1$，则 $\dfrac 2 \pi\leq \dfrac{\sin x}x\leq 1$。
        
            由估值不等式，$1=\dfrac 2 \pi\cdot\dfrac\pi 2\leq \int_0^{\frac\pi 2}\dfrac{\sin x}x\text dx\leq 1\cdot\dfrac\pi 2= \dfrac \pi 2$。
    
		设 $f(x)$ 为区间 $[a,b]$ 上非负的 **连续** 函数，如果 $\int_a^b f(x)\text dx=0$，证明：对 $\forall x\in[a,b]$ 均有 $f(x)=0$。
		
		??? note "解答"
			假设 $\exists x_0\in(a,b)$ 使得 $f(x_0)>0$。
			
			由于 $f(x)$ 在 $x_0$ 处连续，则 $\lim\limits_{x\to x_0}f(x)>0$，由函数极限的保号性，$\exists\delta_0>0$，当 $x\in U(x_0,\delta_0)$ 时，有 $f(x)>\dfrac 1 2 f(x_0)$，且 $\delta_0$ 满足 $(x_0-\delta_0,x_0+\delta_0)\subseteq[a,b]$。
			
			则 $\int_a^b f(x)\text dx=\int_a^{x_0-\delta_0}f(x)\text dx+\int_{x_0-\delta_0}^{x_0+\delta_0}f(x)\text dx+\int_{x_0+\delta_0}^b f(x)\text dx\geq \int_{x_0-\delta_0}^{x_0+\delta_0}f(x)\text dx>\int_{x_0-\delta_0}^{x_0+\delta_0}\dfrac{f(x_0}2\text dx=f(x_0)\delta_0>0$。
			
			这与 $\int_a^b f(x)\text dx=0$ 矛盾，所以 $\forall x\in[a,b]$ 均有 $f(x)=0$。

- 定积分中值定理：设 $f(x)$ 在 $[a,b]$ 上连续，则 $\exists\xi\in(a,b)$ 使得 $\int_a^b f(x)\text dx=f(\xi)(b-a)$。

	称 $\overline f=\dfrac{\int_a^b f(x)\text dx}{b-a}$ 为函数 $f(x)$ 在 $[a,b]$ 上的平均值。

	??? note "证明"
		- **法 1：**
		
			设 $\dfrac 1 {b-a}\int_a^b f(x)\text dx=\mu$。
			
			假设对 $\forall x\in(a,b)$ 均有 $f(x)\neq \mu$，由于 $f(x)$ 在区间 $[a,b]$ 上连续，则函数 $f(x)-\mu$ 在 $[a,b]$ 上保号。
			
			不妨设 $f(x)>\mu$，则 $\int_a^b f(x)\text dx>(b-a)\mu$，这与 $\dfrac 1 {b-a}\int_a^b f(x)\text dx=\mu$ 矛盾。
			
			故 $\exists\xi\in(a,b)$ 使得 $\int_a^b f(x)\text dx=f(\xi)(b-a)$。
		
		- **法 2：**
		
			由于 $f(x)$ 在区间 $[a,b]$ 上了连续，从而 $f(x)$ 在 $[a,b]$ 上存在最大值 $M$ 和最小值 $m$。即 $\exists x_1,x_2\in[a,b]$ 使得 $M=f(x_1),m=f(x_2)$。
			
			不妨设 $x_1\leq x_2$。
			
			- 若 $f(x)$ 为常数，结论显然成立。
		
			- 若 $f(x)$ 不是常数，则 $m<M$，$x_1<x_2$。有 $m(b-a)<\int_a^b f(x)\text dx<M(b-a)$，即 $m<\dfrac{\int_a^b f(x)\text dx}{b-a}<M$。根据连续函数的介值定理，$\exists\xi\in(x_1,x_2)\subseteq(a,b)$ 使得 $f(\xi)=\dfrac{\int_a^b f(x)\text dx}{b-a}$，即 $\exists\xi\in(a,b)$ 使得 $\int_a^b f(x)\text dx=f(\xi)(b-a)$。
	
	???+ example "例题"
		设 $f(x)$ 在 $[0,3]$ 上连续，在 $(0,3)$ 内可导，且 $f(0)+f(2)=2\int_2^3 f(x)\text dx$。证明
		??? note "解答"
			???+ abstract
				证 $\exists\xi,f'(\xi)=0$ 想到罗尔。那么需要找两点的函数值相等。
				
				由介值定理，$\dfrac{f(0)+f(2)}2$ 被 $[0,2]$ 种某点的函数值取到。由积分中值定理，也会被 $(2,3)$ 内某点的函数中取到。
			
			根据连续函数的介值定理，$\exists x_1\in[0,2]$ 使得 $f(x_1)=\dfrac{f(0)+f(2)}{2}$。
			
			根据定积分中值定理，$\exists x_2\in(2,3)$ 使得 $\int_2^3 f(x)\text dx=f(x_2)$。
			
			则 $f(x_1)=f(x_2)$。又 $f(x)$ 在 $[x_1,x_2]$ 上连续，在 $(x_1,x_2)$ 内可导，根据罗尔定理，$\exists\xi\in(x_1,x_2)\subset(0,3)$ 使得 $f'(\xi)=0$。
			
			???+ tip
				设 $f(x)$ 在 $[a,b]$ 上连续，则对 $\forall \alpha_i>0$，$\sum_{i=1}^n \alpha_i=1$，及 $\forall x_i\in[a,b]$，$\exists\xi\in[a,b]$ 使得 $f(\xi)=\sum_{i=1}^n \alpha_if(x_i)$。

- 推广的定积分中值定理

	设 $f(x),g(x)$ 在 $[a,b]$ 上连续，且 $g(x)$ 在 $[a,b]$ 上 **不变号**，则 $\exists\xi\in[a,b]$ 使得 $\int_a^b f(x)g(x)\text dx=f(\xi)\int_a^b g(x)\text dx$。
	
	??? note "证明"
		不妨设 $\forall x\in[a,b]$，$g(x)\geq 0$。
		
		- 若 $\int_a^b g(x)=0$，又 $g(x)$ 在 $[a,b]$ 上连续且非负，故 $g(x)\equiv 0$。从而，结论对 $\forall \xi\in[a,b]$ 均成立。
		- 若 $\int_a^b g(x)>0$：
		
			由于 $f(x)$ 在 $[a,b]$ 上连续，故 $f(x)$ 在 $[a,b]$ 上有最小值 $m$ 和最大值 $M$。即 $m\leq f(x)\leq M$，从而 $mg(x)\leq f(x)g(x)\leq Mg(x)$。
		
  	      根据定积分的性质，有 $m\int_a^b g(x)\text dx\leq \int_a^b f(x)g(x)\text dx\leq M\int_a^b g(x)\text dx$。
	
  	      则 $m\leq \dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}\leq M$，根据连续函数的介值定理，$\exists\xi\in[a,b]$ 使得 $\int_a^b f(x)g(x)\text dx=f(\xi)\int_a^b g(x)\text dx$。

	设 $f(x),g(x)$ 在 $[a,b]$ 上连续，且 $g(x)$ 在 $[a,b]$ 上 **不变号**，则 $\exists\xi\in(a,b)$ 使得 $\int_a^b f(x)g(x)\text dx=f(\xi)\int_a^b g(x)\text dx$。
	
	??? note "证明"
		不妨设 $\forall x\in[a,b]$，$g(x)\geq 0$。
		
		- 若 $\int_a^b g(x)=0$，又 $g(x)$ 在 $[a,b]$ 上连续且非负，故 $g(x)\equiv 0$。从而，结论对 $\forall \xi\in(a,b)$ 均成立。
		- 若 $\int_a^b g(x)>0$，记 $\dfrac{\int_a^b f(x)g(x)\text dx}{\int_a^b g(x)\text dx}=\mu$。
		
			假设不存在 $\xi\in(a,b)$ 使得 $f(\xi)=\mu$。不妨设 $\forall x\in(a,b)$，$f(x)>\mu$，则 $f(x)g(x)>\mu g(x)$，故 $\int_a^b f(x)g(x)\text dx>\mu\int_a^b g(x)\text dx$，这与 $\int_a^b f(x)g(x)\text dx=\mu\int_a^b g(x)\text dx$ 矛盾。
			
			故 $\exists\xi\in(a,b)$ 使得 $\int_a^b f(x)g(x)\text dx=f(\xi)\int_a^b g(x)\text dx$。

- 变上限函数的导数

	设 $f(x)$ 在 $[a,b]$ 上连续，则 $F(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上可导，且 $F'(x)=f(x)$。
	
	???+ tip
		由上可知，$F(x)$ 为 $f(x)$ 的一个原函数，即连续函数一定有原函数。
		
		且若 $f(x)$ 在 $[a,b]$ 上可导，则 $F(x)=\int_a^b f(t)\text dt$ 在 $[a,b]$ 上连续。

	??? note "证明"
		- **法 1：**
		
			对 $\forall x\in[a,b]$，取增量 $\Delta x$ 使得 $x+\Delta x\in[a,b]$。则 
			
			$\begin{aligned}F'(x)&=\lim\limits_{\Delta x\to 0}\dfrac{F(x+\Delta x)-F(x)}{\Delta x}\\&=\lim\limits_{\Delta x\to 0}\dfrac{\int_a^{x+\Delta x}f(t)\text dt-\int_a^x f(t)\text dt}{\Delta x}\\&=\lim\limits_{\Delta x\to 0}\dfrac{\int_x^{x+\Delta x}f(t)\text dt}{\Delta x}\\&=\lim\limits_{\Delta x\to 0}\dfrac{f(x+\theta\Delta x)\cdot \Delta x}{\Delta x}\,(0<\theta<1)\\&=f(x)\end{aligned}$
			
			所以 $F(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上可导，且 $F'(x)=f(x)$。
			
		- **法 2：**
		
			对 $\forall x\in[a,b]$，取增量 $\Delta x$ 使得 $x+\Delta x\in[a,b]$。
			
			由于 $f(x)$ 在 $[a,b]$ 上连续，则对 $\forall\varepsilon>0$，$\exists\delta>0$，当 $|t-x|<\delta$ 时，有 $|f(t)-f(x)|<\varepsilon$。
			
			$\begin{aligned}|\dfrac{F(x+\Delta x)-F(x)}{\Delta x}-f(x)|&=|\dfrac{\int_a^{x+\Delta x}f(t)\text dt-\int_a^x f(t)\text dt}{\Delta x}-f(x)|\\&=\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}f(t)\text dt-f(x)\Delta x|\\&=\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}f(t)\text dt-\int_x^{x+\Delta x}f(x)\text dt|\\&=\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}[f(t)-f(x)]\text dt|\\&\leq\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}|f(t)-f(x)|\text dt|\end{aligned}$
			
			对 $\forall\varepsilon>0$，$\exists\delta>0$，当 $|t-x|<\delta$ 时（$|\Delta x|<\delta$），有 $|\dfrac{F(x+\Delta x)-F(x)}{\Delta x}-f(x)|\leq\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}|f(t)-f(x)|\text dt|<\dfrac 1 {|\Delta x|}|\int_x^{x+\Delta x}\varepsilon\text dt|=\varepsilon$。
			
			所以，$F(x)=\int_a^x f(t)\text dt$ 在 $[a,b]$ 上可导，且 $F'(x)=f(x)$。
	
	???+ example "例题"
		计算下列函数的导数：① $f(x)=\int_0^x x\arctan\sqrt[3]t\text dt$；② $g(x)=\int_0^{x^3}\arctan\sqrt[3]t\text dt$。
			
		??? note "解答"
			???+ tip
				计算变上限函数的导数时，可以不计算其定积分值，直接求其倒数。
				
			① $f(x)=x\int_0^x \arctan\sqrt [3]t\text dt$，则 $f'(x)=\int_0^x \arctan\sqrt[3]t\text dt+x\arctan\sqrt[3]x$。
				
			② 令 $x^3=u$，$g'(x)=\dfrac{\text dg}{\text dx}=\dfrac{\text dg}{\text du}\cdot\dfrac{\text du}{\text dx}=\dfrac{\text d}{\text du}(\int_0^u\arctan\sqrt[3]t\text dt)\dfrac{\text du}{\text dx}=\arctan\sqrt[3]u\cdot 3x^2=3x^2\arctan x$。
		
		计算：$\lim\limits_{x\to 0}\dfrac{\int_0^{2x}(e^{t^2}-1)\sin t\text dt}{\arctan^2 x\cdot\ln(1-2x^2)}$。
		
		??? note "解答"
			该极限为 $\dfrac 0 0$ 型的不定式，可洛必达计算。
			
			$=\lim\limits_{x\to 0}\dfrac{\int_0^{2x}(e^{t^2}-1)\sin t\text dt}{x^2\cdot(-2x^2)}=\lim\limits_{x\to 0}\dfrac{2(e^{4x^2}-1)\sin 2x}{-8x^3}=\lim\limits_{x\to 0}\dfrac{16x^3}{-8x^3}=-2$

- 积分限为复合函数的求导

	设 $f(x)$ 为 $\mathbb R$ 上的连续函数，$\varphi_1(x),\varphi_2(x)$ 均为可导函数，则 $\dfrac{\text d}{\text dx}(\int_{\varphi_1(x)}^{\varphi_2(x)}f(t)\text dt)=\dfrac{\text d}{\text dx}(\int_0^{\varphi_2(x)}f(t)\text dt-\int_0^{\varphi_1(x)}f(t)\text dt)=f(\varphi_2(x))\varphi_2'(x)-f(\varphi_1(x))\varphi_1'(x)$。

- 牛顿-莱布尼茨公式（微积分基本公式）

	设 $f(x)$ 在 $[a,b]$ 上连续，$F(x)$ 为 $f(x)$ 的一个原函数，则 $\int_a^b f(x)\text dx=F(x)\vert_a^b=F(b)-F(a)$。
	
	??? note "证明"
		设 $G(x)=\int_a^x f(t)\text dt$，则 $G'(x)=f(x)$。而 $F(x)$ 为 $f(x)$ 的一个原函数，故 $F'(x)=f(x)$。
		
		因此，存在常数 $C$ 使得 $G(x)=F(x)+C$。
		
		又 $F(a)+C=G(a)=0$，则 $C=-F(a)$。
		
		故 $\int_a^b f(t)\text dt=G(b)=F(b)+C=F(b)-F(a)$。
	
	???+ example "例题"
		计算下列定积分：① $\int_0^1 \dfrac{2x+3}{x^2-2x+3}\text dx$；② $\int_0^1 \sqrt{\dfrac{1-x}{1+x}}\text dx$。
		
		??? note "解答"
			① 找原函数
			
			$\begin{aligned}\int_0^1\dfrac{2x+3}{x^2-2x+2}\text dx&=\int_0^1\dfrac{2x-2}{x^2-2x+3}\text dx+\int_0^1\dfrac{5}{x^2-2x+2}\text dx\\&=\int_0^1\dfrac{\text d(x^2-2x+2)}{x^2-2x+2}+5\int_0^1\dfrac{1}{(x-1)^2+1}\text dx\\&=\ln(x^2-2x+2)\vert_0^1+5\arctan(x-1)\vert_0^1\\&=-\ln 2+\dfrac 5 4\pi\end{aligned}$
			
			② $\int_0^1\sqrt{\dfrac{1-x}{1+x}}\text dx=\int_0^1\dfrac{1-x}{\sqrt{1-x^2}}\text dx=(\arcsin x+\sqrt{1-x^2})\vert_0^1=\dfrac\pi 2-1$

		计算定积分：① $\int_1^4 \max\{2x+3,x^2\}\text dx$；② $\int_0^{\pi}\sqrt{1-\sin 2x}\text dx$。
		
		??? note "解答"
			① $I=\int_1^3 (2x+3)\text dx+\int_3^4 x^2\text dx=(x^2+3x)\vert_1^3+\dfrac{x^3}3\big\vert_3^4=14+\dfrac{37}3=\dfrac{79}3$
			
			② $I=\int_0^{\pi}\sqrt{(\cos x-\sin x)^2}\text dx=\int_0^{\pi}|\cos x-\sin x|\text dx=\int_0^{\frac\pi 4}(\cos x-\sin x)\text dx+\int_{\frac\pi 4}^{\pi}(\sin x-\cos x)\text dx=(\sin x+\cos x)\vert_0^{\frac\pi 4}+(-\cos x-\sin x)\vert_{\frac\pi 4}^{\pi}=(\sqrt 2-1)+(1+\sqrt 2)=2\sqrt 2$

### 定积分的计算方法

- 定积分的换元积分法

	设 $f(x)$ 在 $[a,b]$ 上连续，$\varphi(t)$ 在 $[\alpha,\beta]$ 上有连续导数，且 $\varphi'(t)\neq 0$（这说明 $x=\varphi(t)$ 在 $[\alpha,\beta]$ 上严格单调），$\varphi(\alpha)=a$，$\varphi(\beta)=b$，函数 $\varphi$ 的值域 $\varphi([\alpha,\beta])\subseteq[a,b]$，则 $\int_a^b f(x)\text dx=\int_{\alpha}^{\beta}f(\varphi(t))\cdot\varphi'(t)\text dt$。
	
	??? note "证明"
		由于 $f(x)$ 在 $[a,b]$ 上连续，则 $f(x)$ 存在原函数，设其原函数为 $F(x)$。根据牛顿-莱布尼茨公式，有 $\int_a^b f(x)\text dx=F(b)-F(a)$。
		
		又 $\dfrac{\text d}{\text dt}(F(\varphi(t))=F'(\varphi(t))\cdot \varphi'(t)=f(\varphi(t))\cdot \varphi'(t)$，故 $F(\varphi(t))$ 为函数 $f(\varphi(t))\cdot\varphi'(t)$ 的原函数。
		
		由牛顿-莱布尼茨公式，$\int_{\alpha}^{\beta}f(\varphi(t))\cdot\varphi'(t)\text dt=F(\varphi(t))\vert_{\alpha}^{\beta}=F(\varphi(\beta))-F(\varphi(\alpha))=F(b)-F(a)$。
		
		所以 $\int_a^b f(x)\text dx=\int_{\alpha}^{\beta}f(\varphi(t))\cdot\varphi'(t)\text dt$。
		
	???+ example "例题"
		计算：$\int_0^3\dfrac{\text dx}{1+\sqrt{1+x}}$。
			
		??? note "解答"
			令 $\sqrt{1+x}=t$，则 $x=t^2-1$，$\text dx=2t\text dt$。注意还原后积分限为 $t:1\to 2$。
				
			$I=\int_1^2\dfrac{2t}{t+1}\text dt=2\int_1^2 (1-\dfrac 1 {t+1})\text dt=2[t-\ln(1+t)]\vert_1^2=2-2\ln\dfrac 3 2$。
			
		计算：$\int_0^a \sqrt{a^2-x^2}\text dx\,(a>0)$。
			
		??? note "解答"
			- **法 1：**
				
				根据定积分的几何意义，$\int_0^a \sqrt{a^2-x^2}\text dx$ 表示半径为 $a$ 的四分之一圆面积。$I=\dfrac 1 4 \pi a^2$。
				
			- **法 2：**
				
				$I\xlongequal{x=a\sin t}\int_0^{\frac\pi 2}a\cos t\cdot a\cdot t\text dt=\dfrac{a^2}2\int_0^{\frac\pi 2}(1+\cos 2t)\text dt=\dfrac{a^2}2(t+\dfrac 1 2\sin 2t)\vert_0^{\frac\pi 2}=\dfrac 1 4 \pi a^2$
				
			- **法 3：**
				
				$I=[\dfrac x 2\sqrt{a^2-x^2}+\dfrac{a^2}2\arcsin\dfrac x a]\vert_0^a=\dfrac 1 4 \pi a^2$
		
		设 $f(x)=\begin{cases}e^{-x}&(x\leq 0)\\3x^2+1&(x>0)\end{cases}$，计算：$\int_0^2 f(x-1)\text dx$。
		
		??? note "解答"
			$I\xlongequal{x-1=t}\int_{-1}^1 f(t)\text dt=\int_{-1}^0 e^{-t}\text dt+\int_0^1 (3t^2+1)\text dt=-e^{-t}\vert_{-1}^0+(t^3+t)\vert_0^1=e+1$
		
		计算：$\int_{\frac 1 2}^{\frac 1 {\sqrt 2}}\dfrac{\text dx}{x^2\sqrt{1-x^2}}$。
		
		??? note "解答"
			- **法 1：**（三角变换）
			
				$I\xlongequal{x=\sin t}\int_{\frac \pi 6}^{\frac\pi 4}\dfrac{\cos t\text dt}{\sin^2 t\cdot \cos t}=\int_{\frac\pi 6}^{\frac\pi 4}\text{\text dt}{\sin^2 t}=-\cot t\vert_{\frac\pi 6}^{\frac\pi 4}=-(1-\sqrt 3)=\sqrt 3-1$
			
			- **法 2：**（倒变换）
			
				$I\xlongequal{x=\frac 1 t}\int_2^{\sqrt 2}\dfrac{1}{\frac 1 {t^2}\sqrt{1-\frac 1 {t^2}}}\cdot(-\dfrac 1 {t^2})\text dt=\int_{\sqrt 2}^2\dfrac{t}{\sqrt{t^2-1}}\text dt=\sqrt{t^2-1}\vert_{\sqrt 2}^2=\sqrt 3-1$

- 对称区间上的定积分

	???+ example "例题"
		计算：$\int_{-\pi}^{\pi}\dfrac{(x+1)^2}{x^2+1}|\sin x|\text dx$。
		
		??? note "解答"
			$I=\int_{-\pi}^{\pi}\dfrac{(x^2+1)+2x}{x^2+1}|\sin x|\text dx=\int_{-\pi}^{\pi}(1+\dfrac{2x}{x^2+1})|\sin x|\text dx$
			
			注意到 $\dfrac{2x}{x^2+1}$ 是奇函数
			
			$I=2\int_0^{\pi}\sin x\text dx=-2\cos x\vert_0^{\pi}=4$
		
		计算：$\int_{-1}^1(\ln\dfrac{2-x}{2+x}+1)x^{2024}\text dx$。
		
		??? note "解答"
			注意到 $\ln\dfrac{2-x}{2+x}$ 是奇函数
			
			$I=\int_{-1}^1 x^{2024}\text dx=2\int_0^1 x^{2024}\text dx=\dfrac{2}{2025}$
		
		计算：$\int_{-2}^2 x^3\ln(1+e^x)\text dx$。
		
		??? note "解答"
			???+ abstract
				$\int_{-a}^a f(x)\text dx=\int_0^a [f(x)+f(-x)]\text dx$
				
				$\ln(1+e^x)-\ln(1+e^{-x})=\ln\dfrac{1+e^x}{1+e^{-x}}\\ln e^x=x$
			
			$I=\int_0^2[x^3\ln(1+e^x)+(-x)^3\ln(1+e^{-x})]\text dx=\int_0^2 x^3 \ln\dfrac{1+e^x}{1+e^{-x}}\text dx=\int_0^2 x^4\text dx=\dfrac{32}5$
		
		计算：$\int_{-1}^1\dfrac{|x|^{2023}+1}{2023^x+1}\text dx$。
		
		??? note "解答"
			???+ abstract
				$\int_{-a}^a f(x)\text dx=\int_0^a [f(x)+f(-x)]\text dx$
				
				$\dfrac{1}{a+1}+\dfrac 1 {a^{-1}+1}=\dfrac 1 {a+1}+\dfrac{a}{1+a}=1$
			
			$I=\int_0^1(\dfrac{|x|^{2023}+1}{2023^x+1}+\dfrac{|-x|^{2023}+1}{2023^{-x}+1})\text dx=\int_0^1 (|x|^{2023}+1)\text dx=\dfrac{2025}{2024}$
		
		计算：$\int_{-1}^1 x^2\arctan (e^x)\text dx$。
		
		??? note "解答"
			???+ abstarct
				$\int_{-a}^a f(x)\text dx=\int_0^a [f(x)+f(-x)]\text dx$
				
				$\arctan(e^x)+\arctan(e^{-x})=\dfrac\pi 2$
			
			$I=\int_0^1[x^2\arctan(e^x)+(-x)^2\arctan(e^{-x})]\text dx=\dfrac\pi 2\int_0^1 x^2\text dx=\dfrac\pi 6$
			
- 周期函数的积分

	设 $f(x)$ 是周期为 $T>0$ 的连续函数，则 $\int_a^{a+T}f(x)\text dx$ 与 $a$ 无关。
	
	??? note "证明"
		- **法 1：**
		
			$\int_a^{a+T}f(x)\text dx=\int_a^0 f(x)\text dx+\int_0^T f(x)\text dx+\int_T^{a+T}f(x)\text dx$
			
			又 $\int_T^{a+T}f(x)\text dx\xlongequal{x=u+T}\int_0^a f(u+T)\text du=\int_0^a f(u)\text du$
			
			则 $\int_a^{a+T}f(x)\text dx=\int_a^0 f(x)\text dx+\int_0^T f(x)\text dx+\int_0^a f(u)\text du=\int_0^T f(x)\text dx$.
		
		- **法 2：**
		
			记 $g(a)=\int_a^{a+T}f(x)\text dx$，则 $g'(a)=f(a+T)-f(a)=0$。因此 $g(a)$ 为定值，从而 $\int_a^{a+T}f(x)\text dx$ 为定值。
	
	???+ example "例题"
		计算：$\int_0^{2024\pi}|\sin x|\text dx$。
		
		??? note "解答"
			$|\sin x|$ 是周期为 $\pi$ 的函数
			
			$I=2024\int_0^{\pi}|\sin x|\text dx=2024\int_0^\pi \sin x\text dx=2024(-\cos x)\vert_0^{\pi}=4048$
		
		计算：$\int_0^{n\pi}x|\sin x|\text dx$。
		
		??? note "解答"
			
			???+ abstract
				$\int_0^a f(x)\text dx\xlongequal{x+u=a}\int_0^a f(a-u)\text du$
			
			$I=\int_0^{n\pi}(n\pi-u)|\sin(n\pi-u)|\text du=\int_0^{n\pi}(n\pi-u)|\sin u|\text du=n\pi\int_0^{n\pi}|\sin u|\text du-\int_0^{n\pi}u|\sin u|\text du=n\pi\cdot 2n-I$
			
			则 $I=n^2\pi$。


- 基于积分限的几种变换

	$\int_{-a}^a f(x)\text dx\xlongequal{x=-u}\int_{-a}^a f(-u)\text du$
	
	$\int_{\frac 1 a}^a f(x)\text dx\xlongequal{x=\frac 1 u}\int_{\frac 1 a}^a \dfrac 1 {u^2}f(\dfrac 1 u)\text du$
	
	$\int_a^b f(x)\text dx\xlongequal{x=(a+b)-u}\int_a^b f((a+b)-u)\text du$
	
	$\int_0^a f(x)\text dx\xlongequal{x=a-u}\int_0^a f(a-u)\text du$
	
	$\int_a^b f(x)\text dx\xlongequal{x=\frac{a+b}2-u}\int_{-\frac{b-a}2}^{\frac{b-a}2}f(\dfrac{a+b}2-u)\text du$

- 基于被积函数的换元

	$\sqrt{ax+b}=u$，$x=\dfrac{u^2-b}a$，$\text dx=\dfrac{2u}a\text du$
	
	$\sqrt{a^2-x^2}$，令 $x=a\sin u$，$\text dx=a\cos u\text du$
	
	$\sqrt{x^2+a^2}$，令 $x=a\tan u$，$\text dx=\sec^2 u\text du$
	
	$\sqrt{x^2-a^2}$，令 $x=a\sec u$，$\text dx=a\sec u\tan u\text du$
	
	$\sqrt{e^x+1}=u$，$x=\ln(u^2-1)$，$\text dx=\dfrac{2u\text du}{u^2-1}$
	
	$\sqrt{\dfrac{ax+b}{cx+d}}=u$，$x=\dfrac{du^2-b}{a-cu^2}$，$\text dx=\dfrac{2(ad-bc)u}{(a-cu^2)^2}\text du$
	
	$x=\dfrac 1 u$，$\text dx=-\dfrac 1 {u^2}\text du$
	
	???+ example "例题"
		计算：$\int_0^1\dfrac{\ln(1+x)}{1+x^2}\text dx$。
		
		??? note "解答"
			$I\xlongequal{x=\tan u}\int_0^{\frac\pi 4}\dfrac{\ln(1+\tan u)}{1+\tan^2 u}\sec^2 \text du=\int_0^{\frac\pi 4}\ln(1+\tan u)\text du$
			
			- **法 1：**
			
				???+ abstract
					$\ln(1+\tan u)=\ln(\sin u+\cos u)-\ln \cos u=\ln[\sqrt 2\sin(u+\dfrac\pi 4)]-\ln \cos u$
					
					而 $\sin(u+\dfrac \pi 4)$ 可以换元成 $\cos t$。两个 $\cos$ 的积分项可以抵消。
				
				$\int_0^{\frac\pi 4}\ln(1+\tan u)\text du=\int_0^{\frac\pi 4}\ln(\sin u+\cos u)\text du-\int_0^{\frac\pi 4}\ln\cos u\text du$
				
				而 $\int_0^{\frac \pi 4}\ln(\sin u+\cos u)\text du=\int_0^{\frac\pi 4}\ln[\sqrt 2\sin (u+\dfrac\pi 4)\text du]=\dfrac\pi 8\ln 2+\int_{\frac\pi 4}^{\frac\pi 2}\ln\sin t\text dt\xlongequal{t=\frac\pi 2-u}\dfrac\pi 8\ln 2-\int_{\frac\pi 4}^0\ln\cos u\text du=\dfrac\pi 8\ln 2+\int_0^{\frac\pi 4}\ln\cos u\text du$
				
				因此 $\int_0^1 \dfrac{\ln(1+x)}{1+x^2}\text dx=\dfrac\pi 8\ln 2$。
			
			- **法 2：**
				
				???+ abstract
					$1+\tan(\dfrac\pi 4-t)=1+\dfrac{1-\tan t}{1+\tan t}=\dfrac{2}{1+\tan t}$
				
				$\int_0^{\frac\pi 4}\ln(1+\tan u)\text du\xlongequal{u=\frac\pi 4-t}\int_0^{\frac\pi 4}\ln(1+\tan (\dfrac\pi 4-t))\text dt=\int_0^{\frac\pi 4}\ln(1+\dfrac{1-\tan t}{1+\tan t})\text dt=\dfrac\pi 4\ln 2-\int_0^{\frac\pi 4}\ln(1+\tan t)\text dt$
				
				则 $\int_0^{\frac\pi 4}\ln(1+\tan u)\text du=\dfrac\pi 8\ln 2$。
			
			- **法 3：**
			
				设 $x=\dfrac{1-u}{1+u}$，则 $\text dx=-\dfrac{2\text du}{(1+u)^2}$。
				
				$\int_0^1\dfrac{\ln(1+x)}{1+x^2}\text dx=\int_1^0\dfrac{\ln(1+\frac{1-u}{1+u})}{1+\frac{(1-u)^2}{(1+u)^2}}\cdot(-\dfrac 2 {(1+u)^2})\text du=\int_0^1 \dfrac{\ln 2-\ln(1+u)}{1+u^2}\text du=\dfrac\pi 4\ln 2-\int_0^1\dfrac{\ln(1+u)}{1+u^2}\text du$
				
				则 $\int_0^1\dfrac{\ln(1+x)}{1+x^2}\text dx=\dfrac\pi 8\ln 2$。

- 定积分的分部积分法

	设 $u=u(x),v=v(x)$ 在 $[a,b]$ 上有连续导数，则 $\text d(uv)=u\text dv+v\text du$。
	
	$\int_a^b u(x)v'(x)\text dx=\int_a^b [(u(x)v(x))'-u'(x)v(x)]\text dx=(u(x)v(x))\big\vert_a^b-\int_a^b u'(x)v(x)\text dx$
	
	???+ example "例题"
		计算：$\int_0^1 x\arctan x\text dx$。
		
		??? note "解答"
			$I=\dfrac 1 2\int_0^1 \arctan x\text d(x^2)=\dfrac 1 2(x^2\arctan x)\vert_0^1-\dfrac 1 2\int_0^1 \dfrac{x^2}{1+x^2}\text dx=\dfrac\pi 8-\dfrac 1 2(x-\arctan x)\vert_0^1=\dfrac{\pi-2}4$
		
		计算：$\int_1^e \sin(\ln x)\text dx$。 
		
		??? note "解答"
			$I=(x\sin (\ln x))\vert_1^e-\int_1^e \cos(\ln x)\text dx=e\sin 1-(x\cos (\ln x))\vert_1^e-\int_1^e\sin(\ln x)\text dx=e\sin 1-e\cos 1+1-I$
			
			则 $I=\dfrac 1 2(e\sin 1-e\cos 1+1)$。

## 题目

- 积分与极限结合

	???+ example "例题"
		证明：$\lim\limits_{n\to +\infty}\int_0^1\dfrac{x^n}{x+1}\text dx=0$。
		
		??? note "解答"
			???+ failure "错解"
				根据积分中值定理，$\exists\xi\in(0,1)$ 使得 $\int_0^1\dfrac{x^n}{x+1}\text dx=\dfrac{\xi^n}{1+\xi}\leq \xi^n$。
				
				故 $0\leq \lim\limits_{n\to +\infty}\int_0^1\dfrac{x^n}{x+1}\text dx\leq \lim\limits_{n\to +\infty}\xi^n=0$（$|\xi|<1$）。
				
				???+ warning "错因"
					$\xi$与 $n$ 有关，不是常数。$|\xi|<1$ 不能推出 $\lim\limits_{n\to +\infty}\xi^n=0$。
					
					若 $\xi_n=\dfrac n{n+1}$，则 $\lim\limits_{n\to +\infty}\xi_n^n=\lim\limits_{n\to +\infty}(\dfrac n{n+1})^n=\dfrac 1 3\neq 0$。
				
			由于 $0\leq \dfrac{x^n}{x+1}\leq x^n$，故 $0\leq \int_0^1\dfrac{x^n}{x+1}\text dx\leq \int_0^1x^n\text dx=\dfrac 1 {n+1}$。
				
			而 $\lim\limits_{n\to +\infty}\dfrac 1 {n+1}=0$，故 $\lim\limits_{n\to +\infty}\int_0^1\dfrac{x^n}{x+1}\text dx=0$。
			
		设 $f(x)$ 在 $[0,1]$ 上连续，证明：$\lim\limits_{n\to +\infty}\int_0^1 x^n f(x)\text dx=0$。
		
		??? note "解答"
			由于 $f(x)$ 在 $[0,1]$ 上连续，则 $|f(x)|$ 在 $[0,1]$ 上连续。设 $|f(x)|$ 在 $[0,1]$ 上的最大值为 $M$，则 $0\leq x^n|f(x)|\leq Mx^n$。
			
			$0\leq |\int_0^1 x^nf(x)\text dx|\leq \int_0^1|x^nf(x)|\text dx\leq M\int_0^1 x^n\text dx=\dfrac{M}{n+1}$
			
			而 $\lim\limits_{n\to +\infty}\dfrac M{n+1}=0$，故 $\lim\limits_{n\to +\infty}x^nf(x)\text dx=0$。

- 证明题

	???+ example "例题"
		设 $f(x)$ 在 $[0,1]$ 上连续，且对 $\forall x\in[0,1]$ 有 $0<m\leq f(x)\leq M$，证明：$1\leq \int_0^1 f(x)\text dx\int_0^1 \dfrac{\text dx}{f(x)}\leq \dfrac{(M+m)^2}{4Mm}$。
		
		??? note "解答"
			由于 $\dfrac{(f-m)(M-f)}{f}\geq 0$，则 $f+\dfrac{Mm}f\leq M+m$。
			
			则 $M+m\geq \int_0^1 f(x)\text dx+Mm\int_0^1\dfrac{\text dx}{f(x)}\geq 2\sqrt{\int_0^1 f(x)\text dx\cdot Mm\int_0^1 \dfrac{\text dx}{f(x)}}$，故 $\int_0^1 f(x)\text dx\int_0^1 \dfrac{\text dx}{f(x)}\leq \dfrac{(M+m)^2}{4Mm}$。

- 换元

	???+ example "例题"
		设 $f(x)$ 在 $\mathbb R$ 上连续，记 $F(x)=\int_0^x tf(x-t)\text dt$。求 $F'(x),F''(x)$。
		
		??? note "解答"
			$F(x)\xlongequal{x-t=u}\int_0^x (x-u)f(u)\text du=x\int_0^x f(u)\text du-\int_0^x uf(u)\text du$
			
			$F'(x)=\int_0^x f(u)\text du+xf(x)-xf(x)=\int_0^x f(u)\text du$
			
			$F''(x)=f(x)$

- 含积分的函数方程

	???+ example "例题"
		设 $f(x)$ 在 $\mathbb R$ 上连续，且 $f(x)=\int_0^x e^{x-t}f(t)\text dt+e^x$，求 $f(x)$。
		
		??? note "解答"
			$e^{-x}f(x)=\int_0^x e^{-t}f(t)\text dt+1$
			
			记 $g(x)=e^{-x}f(x)$，则 $g(x)=\int_0^x g(t)\text dt+1$。
			
			两边求导，得 $g'(x)=g(x)$。
			
			$g(x)-g'(x)=0$，$(e^{-x}g(x))'=0$，$e^{-x}g(x)=C$（$C$ 为常数），则 $g(x)=C\cdot e^x$。
			
			将 $x=0$ 代入 $g(x)=\int_0^x g(t)\text dt+1$，得 $g(0)=\int_0^0 g(t)\text dt+1=0+1=1$。故 $C=1$。
			
			则 $g(x)=e^x$，$f(x)=e^xg(x)=e^{2x}$。