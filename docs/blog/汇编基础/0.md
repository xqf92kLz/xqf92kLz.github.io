平时作业 20%，小测 40%，期末考试 40%

期末考试题型：

1. 理论（60 分，45 分钟）

    - 判断题
    - 单选题

2. 实验（40 分，85 分钟）

    - 3 道程序填空题


最后一节课的期末突击：

1. 理论

    - 算术运算：add，sub，mul，imul，div，idiv，inc，dec，**adc 带进位加**（+CF），**sbb 带借位减**（-CF），neg

       stc 使 CF=1，clc 使 CF=0。add、sub 会影响 CF，inc、dec 不影响 CF（但会影响 ZF/OF/SF/PF）

    - 二进制运算：and，or，xor，not，shl 逻辑左移，shr 逻辑右移，sal 算术左移（等价于 shl），**sar 算术右移**（不等价于 shr，sar 会在被操作数是负数时补 1），rol 循环左移，ror 循环右移，**rcl 带进位循环左移**（把 CF 看作其中一位参与运算），**rcr 带进位循环右移**，**test**（and 运算但不改变寄存器的值，仅影响标志位。如 ZF=0，jnz 跳转条件满足）

    - 循环相关的指令：loop（`loop again` 相当于 `dec cx` 然后 `jnz again` ），jcxz（jump if cx is zero）

    - 扩充相关的指令：**cbw**（AL 符号扩充到 AX），**cwd**（AX 符号扩充到 DX:AX），**cdq**（EAX 符号扩充到 EDX:EAX），**movzx**（零扩充），**movsx**（符号扩充）

    - 取地址相关的指令：**lea** 取变量的偏移地址（16 位有 [] 里只能用特定寄存器和特定组合，不能有 ax 等等；32 位无寄存器限制。[] 里有寄存器 × 比例因子时，比例因子只能是 1、2、4、8），**lds**（偏移地址存入通用寄存器，段地址存入 DS 寄存器），**les**（偏移地址存入通用寄存器，段地址存入 ES 寄存器）

    - 跟大小比较相关的跳转指令：je（等价于 jz），jne（等价于 jnz），ja（等价于 jb），jc，jg，jl，jae，jbe，jge，jle

        `cmp ah,bh` 会计算 ah-bh 并影响标志位 ZF/CF/SF/OF 等，但不会把差保存到 ah 中

    - 字符串操作相关的指令：**rep movsb**，**movsb**（相当于 `mov al, ds:[si]`，`mov es:[di], al`，然后若 DF=0 `inc si` `inc di`、若 DF=1 `dec si` `dec di`），**lodsb**（相当于 `mov al,ds:[si]`，然后若 DF=0 `inc si`、若 DF=1 `dec si`），**stosb**（相当于 `mov es:[di],al`，然后若 DF=0 `inc di`、若 DF=1 `dec di`），**rep stosb**

    - 定义变量的关键词：db（1 字节，char），dw（2 字节，short），**dd**（4 字节，long 或 float），**dq**（8 字节，double）
    - 跳转指令 jmp 有短跳、近跳、远跳之分，函数调用指令 call 也有近调用、远调用、中断调用 int 之分，返回也有近返回 ret、远返回 retf、中断返回 iret 之分

    - Delta = 目标地址 - 下条指令地址。注意小端规则


2. 实验

    两种输出（int21，B800），堆栈传递函数参数
