## 第三次课

- 一、IP 地址和子网掩码
    - IP 地址的用途
        - 标识网络中特定主机的 **逻辑地址**，需唯一无冲突，用于 Internet 通信。
        - 每个数据包包含源 IP 和目的 IP，网络设备通过地址确保数据收发准确。
        - 分配对象：网卡（NIC）、工作站、服务器、IP 电话、智能手机等终端，以及路由器接口（如默认网关）。
        - 特殊情况：单块网卡可配置多个 IP 地址（无线 AP 实验关键）。
    - IPv4 地址的结构
        - 本质：32 位二进制数字串，采用 **点分十进制记法**（8 位为一组，共 4 个八位字节）。
        - 格式示例：192.168.1.5、10.10.10.34，每个八位字节取值范围 0-255（对应二进制 00000000-11111111）。
        - 地址总量：2³²≈40 亿个，是目前 Internet 最通用的 IP 地址形式。
    - IPv4 地址的组成部分
        - 层次性结构：分为 **网络部分**（标识主机所属网络）和 **主机部分**（标识网络内特定主机），缺一不可。
        - 示例：IP 地址 192.168.1.100，默认前 3 个八位字节（192.168.1）为网络部分，最后 1 个（100）为主机部分（分层寻址：先找网络，再找主机）。
        - 对比：IP 地址是分层寻址（类似通信地址），MAC 地址是无层次寻址（类似人名）。
    - 子网掩码
        - 定义：32 位二进制数，点分十进制记法，用于区分 IP 地址的网络部分和主机部分。
        - 规则：二进制形式“前一串 1+后一串 0”，“1”对应网络部分（含子网部分，详见第六次课），“0”对应主机部分。
        - 常见类型（家庭/小型企业常用）：
            - 255.0.0.0（8 位 1，记为 /8，格式 N.H.H.H）
            - 255.255.0.0（16 位 1，记为 /16，格式 N.N.H.H）
            - 255.255.255.0（24 位 1，记为 /24，格式 N.N.N.H）
        - 核心意义：无子网掩码的 IP 地址无实际意义，决定主机 ID 的比特位数（在线考试考点）。
    - 子网掩码相关计算题
        - （1）可分配主机数量计算
            - 公式：2^（主机部分位数）- 2
            - 原理：主机部分全 0 为网络地址，全 1 为广播地址，均不可分配给主机。
            - 示例：子网掩码 255.255.255.0（主机部分 8 位），可分配主机数 = 2⁸ - 2 = 254。
        - （2）网络地址计算
            - 方法：IP 地址与子网掩码转换为二进制后，逐位进行 **逻辑与运算**（0&0=0、0&1=0、1&0=0、1&1=1）。
            - 结果：网络部分保留，主机部分全 0，即该 IP 所属的网络地址。
            - 示例：IP 192.168.1.44 + 子网掩码 255.255.255.0，运算后网络地址为 192.168.1.0。
    - 通信逻辑判断
        - 同一网络：源 IP 与目的 IP 的网络地址相同，数据包本地传送（不经过路由器）。
        - 不同网络：网络地址不同，数据包转发至默认网关，再路由至目标网络。
        - 实验关键：设备通信需“物理通+逻辑通”，若 ping 不通/无法访问，大概率是 IP 不在同一逻辑网络（需修改 IP 至同一网段）。

- 二、IPv4 地址的类型
    - 地址分类（A/B/C/D/E 类）
        - 表格说明：
        
            | 地址类 | 第一个八位字节范围 | 地址最高位特征  | 网络部分 / 主机部分         | 默认子网掩码         | 可容纳网络数       | 每个网络可容纳主机数         | 适用场景 |
            | ------ | ------------------ | --------------- | --------------------------- | -------------------- | ------------------ | ---------------------------- | -------- |
            | A 类   | 1-127              | 最高位为 0      | 1 个八位字节 / 3 个八位字节 | 255.0.0.0（/8）      | 2^(8-1)-2=126      | 2^24-2=16777214（约 1600 万） | 大型组织 |
            | B 类   | 128-191            | 最高两位为 10   | 2 个八位字节 / 2 个八位字节 | 255.255.0.0（/16）   | 2^(16-2)-2=65534   | 2^16-2=65534（约 6.5 万）     | 中型网络 |
            | C 类   | 192-223            | 最高三位为 110  | 3 个八位字节 / 1 个八位字节 | 255.255.255.0（/24） | 2^(24-3)-2=2097150 | 2^8-2=254                     | 小型网络 |
            | D 类   | 224-239            | 最高四位为 1110 | -（组播专用）               | -                    | 无（组播地址池）   | 无（不可分配给主机）         | 组播通信 |
            | E 类   | 240-255            | 最高四位为 1111 | -（实验专用）               | -                    | 无（预留未分配）   | 无（不可分配给主机）         | 科研测试 |

            - 补充说明：

                - 可容纳网络数计算逻辑：网络部分需扣除 “全 0”（网络地址无效）和 “全 1”（广播地址无效）的特殊情况，故减去 2；A 类最高位固定为 0（占 1 位），网络位实际可用 7 位；B 类最高两位固定为 10（占 2 位），网络位实际可用 14 位；C 类最高三位固定为 110（占 3 位），网络位实际可用 21 位。
                - 每个网络可容纳主机数计算逻辑：主机部分扣除 “全 0”（网络地址）和 “全 1”（广播地址）的特殊情况，故减去 2。

            - 示例：清华 166.111.\*.\*（B 类），浙大 210.32.\*.\*（C 类）、后来 222.205.\*.\*（C 类），北大 162.105.\*.\*（B 类）。

    - 公有地址与私有地址
    
        - （1）核心背景
            - IPv4 地址已耗尽（2011 年 ICANN 宣布分配完毕），私有地址是缓解方案，仅用于内部网络，不可直接访问 Internet。
        - （2）私有地址范围（RFC1918 标准）
            - A 类：10.0.0.0-10.255.255.255（1 个网络，约 1600 万地址/网络）
            - B 类：172.16.0.0-172.31.255.255（16 个网络，约 6.5 万地址/网络）
            - C 类：192.168.0.0-192.168.255.255（256 个网络，254 地址/网络）
        - （3）关键特性
            - 私有地址不可在 Internet 路由，多个组织可重复使用，无冲突风险。
            - 安全优势：外部无法直接访问私有地址（如 Ping 通）。
            - 访问 Internet 的前提：通过 **网络地址转换（NAT）** 将私有地址转为公有地址。

    - NAT（网络地址转换）
        - 作用：实现私有地址与公有地址的双向转换，是内网访问外网的核心技术。
        - 工作原理：
            - 传出（内网→外网）：将数据包的私有源 IP 转为公有源 IP（如路由器 WAN 口地址）。
            - 传入（外网→内网）：将公有目的 IP 转为私有目的 IP。
        - 比喻：类似公司前台，通过“总机号码（公有地址）”转接“内部分机号（私有地址）”。
		- 路由器接口要求：
			- 常规情况：路由器 WAN 口（外网口）分配 ISP 提供的公有地址，LAN 口（内网口）分配私有地址，二者必须属于不同网络（网络部分不同）。
			- 特殊情况（如家用无线路由器）：WAN 口也可能是私有地址，但仍需与 LAN 口的私有地址分属不同网络。
		- 实际实例：浙江大学内网使用 10.\* 类 A 私有地址，校内设备通信无需转换；当需访问外网时，通过 NAT 将 10.\* 地址转为浙大公有地址（210.32.\*.\*、222.205.\*.\* 等），再接入 Internet。
		- 额外优势：私有地址仅在本地网络可见，外部无法直接 Ping 通或访问，间接提升了内网安全性。
	- 特殊 IPv4 地址
		- 环回地址：127.0.0.0 /8（127.0.0.1 至 127.255.255.254），核心用途是测试网卡及 TCP/IP 协议安装是否正常，主机通过该地址将流量指向自身（localhost=127.0.0.1），无需经过物理网络。
		- APIPA 地址：169.254.0.0 /16（169.254.0.1 至 169.254.255.254），属于自动私有 IP 编址，仅 Windows 主机在无 DHCP 服务器分配 IP 时自动配置（自我配置），出现该地址通常意味着地址异常、通信一般也异常；Linux 和 OS X 系统自动获取 IP 失败时不会分配此类地址。
		- TEST-NET 地址：192.0.2.0 /24（192.0.2.0 至 192.0.2.255），专门留作教学、文档示例及网络测试使用，不用于实际生产网络部署。
    - 单播、广播、组播地址
        - （1）单播地址
            - 用途：一对一通信，标识特定主机。
            - 要求：数据包需同时包含单播 IP 地址（包头）和单播 MAC 地址（以太网帧头）。
        - （2）广播地址
            - 用途：一对所有通信，本地网络（广播域）所有主机接收数据包。
            - 分类与格式：
            
            	- 定向广播地址：IP 地址主机部分全 1（如 C 类 192.168.1.0 网络的广播地址为 192.168.1.255，B 类 172.16.0.0 网络的广播地址为 172.16.255.255）。
				- 受限广播地址：255.255.255.255，仅在本地子网内广播，不被路由器转发
            - MAC 格式：FF-FF-FF-FF-FF-FF（48 位全 1）。
            - 应用：ARP、DHCP 等协议依赖广播。
        - （3）组播地址
            - 用途：一对多通信（如远程游戏、视频会议）。
            - IP 范围：224.0.0.0-239.255.255.255（D 类地址），仅作为目的地址，源地址为单播。
            - MAC 格式：以 01-00-5E 开头，后缀 6 个十六进制字符换算自组播 IP 的低 23 位（如组播 IP 224.15.100.197，二进制为 11100000.00001111.01100100.11000101，提取低 23 位 0001111.01100100.11000101，换算为十六进制是 0F-64-C5，最终组播 MAC 为 01-00-5E-0F-64-C5）。

- 三、IPv6 地址
    - 引入背景
        - IPv4 局限：地址总量仅 40 亿，无法满足亿级新设备（手机、家电、物联网设备）需求，2011 年已耗尽。
        - IPv6 优势：128 位地址空间，总量达 3.4×10³⁸ 个（地球每平方米约 6.6×10²⁰ 个地址），彻底解决地址短缺问题。
    - IPv6 地址结构与表示方法
		- 本质：128 位二进制数，按 16 位为一组划分，共 8 组，每组转换为十六进制表示（字符 A-F 不区分大小写）。
		- 标准格式：x\:x\:x\:x\:x\:x\:x\:x（每组为 16 位十六进制数），示例：2031:0000:130F:0000:0000:09C0:876A:130B。
		- 简化规则：
			- 组内前导零可省略：如 09C0→9C0、0029→29、0000→0。
			- 连续零组缩写为 “::”：仅能使用一次（避免歧义），例：0:0:0:0:0:0:0:1→::1（对应 IPv4 的 127.0.0.1）；2031:0000:130F:0000:0000:09C0:876A:130B→2031:0:130F::9C0:876A:130B（错误示例：不可写成 2031::130F::9C0:876A:130B）。
		- 前缀长度：类似 IPv4 子网掩码，用 “/ 前缀长度” 表示（范围 0-128），典型为 /64（前 64 位为网络前缀，后 64 位为接口 ID，即主机部分）。
    - IPv6 地址类型
        - （1）单播地址（唯一标识设备接口）
            - 全局单播地址（GUA）：类似 IPv4 公有地址，Internet 可路由，分配自 2000::/3 地址块（ICANN→RIR→组织）。
            - 本地链路地址（LLA）：地址块 FE80::/10，用于同一链路/子网内通信，每个 IPv6 接口必配（自动生成或手动配置）。
            - 唯一本地地址：类似 IPv4 私有地址，地址块 FC00::/7，用于内部网络或少量站点间通信。
        - （2）组播地址（一对多通信）
            - 前缀：FF00::/8，分为分配的组播地址和请求节点组播地址。
            - 常见分配组播地址：
                - FF02::1：全节点组播组（所有 IPv6 设备接收，替代 IPv4 广播）。
                - FF02::2：全路由组播组（所有 IPv6 路由器接收）。
            - 请求节点组播地址：格式 FF02::1:FFxx:xxxx，后 24 位取自设备单播地址后 24 位，映射特殊以太网 MAC 地址，用于帧过滤。
        - （3）任播地址（分配给多个设备）
            - 用途：数据包路由至最近的拥有该地址的设备，IPv6 特有（无广播地址）。
    - IPv4 与 IPv6 共存技术
        - 双堆栈：设备同时运行 IPv4 和 IPv6 协议栈，支持两种地址通信。
        - 隧道：将 IPv6 数据包封装到 IPv4 数据包中，通过 IPv4 网络传输。
        - 转换（NAT64）：实现 IPv6 设备与 IPv4 设备的通信，完成数据包协议转换。
    - 中国 IPv6 发展政策与目标
        - （1）核心规划
            - 2017 年《推进互联网协议第六版（IPv6）规模部署行动计划》：5-10 年建成全球最大 IPv6 商业应用网络。
            - 2021-2023 年《IPv6 流量提升三年专项行动计划》：推动 IPv6 从“通路”到“通车”，从“能用”到“好用”。
            - 2025 年目标：IPv6 活跃用户 8.5 亿，物联网 IPv6 连接数 11 亿，移动网络 IPv6 流量占比 70%，固定网络占比 27%。
        - （2）关键任务
            - 网络改造：LTE 网络、固定网络、互联网骨干直联点 IPv6 改造。
            - 终端支持：新生产终端（手机、路由器、智能电视）默认支持 IPv4/IPv6 双栈，存量终端升级。
            - 应用升级：政府网站、Top100 互联网应用、工业互联网、物联网等 IPv6 改造。

- 四、获取 IP 地址的方式
    - 静态地址分配
        - （1）配置方式
            - 网络管理员手工配置主机网络信息，至少包含：IP 地址、子网掩码、默认网关（可选 DNS 服务器地址）。
            - 操作步骤（Win10/2019）：网络图标→网络和 Internet 设置→更改适配器选项→网卡属性→Internet 协议版本 4（TCP/IPv4）→手动输入参数。
            - 操作步骤（Win11）：控制面板→网络和共享中心→更改适配器选项→网卡属性→TCP/IPv4→手动输入参数。
        - （2）优缺点
            - 优点：地址固定，适合服务器、网络打印机等需稳定访问的设备。
            - 缺点：配置繁琐，用户数量变化时需手动调整，易出现地址冲突。
    - 动态地址分配（DHCP）
        - （1）配置方式
            - 通过 **动态主机配置协议（DHCP）** 自动分配 IP 地址、子网掩码、默认网关、DNS 等信息（详见第六次课）。
            - 操作步骤：TCP/IPv4 属性中选择“自动获得 IP 地址”“自动获得 DNS 服务器地址”。
            - 无线网卡特殊设置（Win10/11）：网络和 Internet 设置→WLAN→对应网络→IP 分配→选择“自动（DHCP）”。
        - （2）优缺点
            - 优点：配置便捷，自动分配地址，避免冲突，适合用户数量频繁变化的网络（如办公网、校园网）。
            - 缺点：地址动态变化，不适合需固定地址访问的设备。
    - 特殊操作：单块网卡配置多个 IP 地址
        - 意义：解决无线 AP 实验思考题的关键。
        - 配置路径：TCP/IPv4 属性→高级→添加多个 IP 地址和子网掩码（需手动输入不同网段或同网段的不同 IP）。

## 第六次课

- 子网划分核心概述
    - 子网划分是将一个大网络分割为多个较小网络空间（子网）的过程，核心目的是优化网络性能、提升安全性、合理利用 IP 地址资源。同一子网内的设备可直接通信，子网间需通过路由器转发流量；子网掩码（或网络前缀）用于标识 IP 地址的网络/子网部分与主机部分，是子网划分的关键标识。
- IPv4 子网划分（重点）
    - 划分子网的原因
        - 解决大型广播域的问题
            - 广播域定义：任一主机发送的广播消息能被域内所有主机接收的网络区域（交换机延伸广播域，路由器分割广播域）。
            - 大型广播域的弊端：
                - 大量广播流量导致网络拥堵（甚至“广播风暴”）；
                - 设备需处理所有广播包，降低设备运行效率。
        - 子网划分的核心价值
            - 减小广播域，降低网络流量，改善网络性能；
            - 便于管理员实施安全策略（控制子网间通信权限）；
            - 避免 IP 地址浪费（大网络闲置地址无法被其他网络使用）。
        - 划分子网的依据
            - 位置（如浙大校网按楼层/区域划分 10.0.1.0/24、10.0.2.0/24 等子网）；
            - 组织部门（管理部、人力资源部、学生部等独立子网）；
            - 设备类型（主机、打印机、服务器等专属子网）。
    - IPv4 子网划分基础概念
        - IP 地址结构变化
            - 划分前：IP 地址 = 网络部分 + 主机部分（A 类 /8、B 类 /16、C 类 /24 默认前缀）；
            - 划分后：IP 地址 = 网络部分 + 子网部分 + 主机部分（子网部分由主机位“借用”而来）。
        - 关键公式
            - 可创建子网数：2^k（k 为从主机位借用的位数）；
            - 每个子网可用主机数：2^n - 2（n 为剩余主机位的位数；减 2 是因为网络地址“主机位全 0”和广播地址“主机位全 1”不可分配给主机）。
        - 默认子网掩码与前缀对应关系
        
            | 地址类别 | 默认前缀 | 默认子网掩码 | 默认主机数 |
            |----------|----------|--------------|------------|
            | A 类     | /8       | 255.0.0.0    | 2^24-2=16777214 |
            | B 类     | /16      | 255.255.0.0  | 2^16-2=65534    |
            | C 类     | /24      | 255.255.255.0| 2^8-2=254         |
            
    - 有类子网划分
        - 定义：基于 A、B、C 类地址的默认前缀进行借位，子网掩码仅在默认类别基础上延伸（如 B 类 /16 借 8 位变为 /24）。
        - 示例：A 类地址 10.0.0.0/8（默认 24 位主机位）
            - 借 8 位主机位作为子网位，新前缀为 /16，子网掩码 255.255.0.0；
            - 可创建子网数：2^8=256（10.0.0.0/16 ~ 10.255.0.0/16）；
            - 每个子网可用主机数：2^16-2=65534；
            - 实际应用：浙大校网进一步将 10.0.0.0/8 划分为 /24 子网（如 10.78.18.0/24），借 16 位主机位，每个子网可用主机 254 台，适配小型部门/区域需求。
    - 无类子网划分
        - 定义：忽略 A、B、C 类地址界限，可从主机位任意借位创建子网（子网掩码非标准默认值，如 255.255.255.240）。
        - 核心场景：C 类 /24 网络的细分（主机位 8 位，借位 1-6 位）
        
            | 借位 k | 新前缀 | 子网掩码 | 子网数 2^k | 剩余主机位 n | 可用主机数 2^n-2 |
            |-------|--------|----------|------------|-------------|------------------|
            | 1     | /25    | 255.255.255.128 | 2 | 7 | 126 |
            | 2     | /26    | 255.255.255.192 | 4 | 6 | 62 |
            | 3     | /27    | 255.255.255.224 | 8 | 5 | 30 |
            | 4     | /28    | 255.255.255.240 | 16 | 4 | 14 |
            | 5     | /29    | 255.255.255.248 | 32 | 3 | 6 |
            | 6     | /30    | 255.255.255.252 | 64 | 2 | 2 |
            
        - 示例：C 类地址 192.168.1.0/24 需 3 个子网
            - 借 1 位仅能创建 2 个子网，满足不了需求，需借 2 位；
            - 子网数：2^2=4（192.168.1.0/26、192.168.1.64/26、192.168.1.128/26、192.168.1.192/26）；
            - 每个子网可用主机数：2^6-2=62，适配 3 个子网的需求，预留 1 个备用子网。
    - 按要求划分子网的步骤
        - 明确两个核心需求：① 总子网数；② 每个子网最大主机数。
        - 计算步骤：
            - 按最大主机数确定所需剩余主机位 n：满足 2^n - 2 ≥ 最大主机数；
            - 计算需借位 k：k = 原主机位 - n（如 B 类 /16 原主机位 16，需最大主机 40，则 n=6（2^6-2=62≥40），k=16-6=10）；
            - 验证子网数：2^k ≥ 总子网数，若满足则确定前缀和子网掩码。
        - 示例：172.16.0.0/22（原 10 位主机位）需 9 个子网，最大主机 40 台
            - 最大主机 40 → 需 n=6（2^6-2=62≥40）；
            - 借位 k=10-6=4 → 子网数 2^4=16≥9，满足需求；
            - 新前缀 /26（22+4），子网掩码 255.255.255.192；
            - 子网分配：5 个 LAN 子网（172.16.0.0/26 ~ 172.16.1.0/26），4 个 WAN 子网（172.16.2.0/26 ~ 172.16.2.192/26）。
    - 可变长子网掩码（VLSM）
        - 传统子网划分的弊端：所有子网大小一致，导致地址浪费（如 WAN 连接仅需 2 个地址，却分配 /27 子网（30 个可用地址），浪费 28 个）。
        - VLSM 定义：子网掩码随子网需求变化，可对已划分的子网再次划分子网（“子网再子网”），核心是“从大到小”划分（先满足最大主机需求，再细分小子网）。
        - 示例：192.168.20.0/24 需 7 个子网（4 个大楼 LAN 各 25-28 台主机，3 个 WAN 连接各 2 台主机）
            - 第一步：满足 LAN 最大主机 28 台 → 需 n=5（2^5-2=30≥28），借位 k=3（/27），创建 8 个 /27 子网（192.168.20.0/27 ~ 192.168.20.224/27）；
            - 第二步：WAN 连接需 2 台主机 → 需 n=2（2^2-2=2），从最后一个 /27 子网（192.168.20.224/27）再借 3 位（k=3），创建 8 个 /30 子网（192.168.20.224/30 ~ 192.168.20.252/30）；
            - 分配结果：4 个 LAN 用前 4 个 /27 子网，3 个 WAN 用前 3 个 /30 子网，预留 3 个 /27 和 5 个 /30 子网用于扩展。
        - VLSM 配置示例（R1）：
        
            ```
            R1(config)#interface gigabitethernet 0/0  // LAN 接口（/27 子网）
            R1(config-if)#ip address 192.168.20.1 255.255.255.224
            R1(config-if)#exit
            R1(config)#interface serial 0/0/0  // WAN 接口（/30 子网）
            R1(config-if)#ip address 192.168.20.225 255.255.255.252
            R1(config-if)#end
            ```
            
    - “魔数”法（快速计算子网工具）
        - 魔数定义：MN = 256 - 子网掩码“末尾非零数字”（仅适用于子网掩码变化在最后一个字节的场景，如 C 类子网、B 类借位≤8 位）。
        - 核心用途：快速计算子网地址、广播地址、主机地址范围。
        - 计算逻辑：
            - 子网地址 = 网络地址 + 魔数×(子网序号-1)；
            - 广播地址 = 下一个子网地址 - 1；
            - 主机地址范围 = 子网地址+1 ~ 广播地址-1。
        - 示例：192.168.50.0/27（前缀 /27，子网掩码 255.255.255.224）
            - 末尾非零数字=224 → 魔数=256-224=32；
            - 子网地址：192.168.50.0/27（第 1 个）、192.168.50.32/27（第 2 个）、192.168.50.64/27（第 3 个）...192.168.50.224/27（最后 1 个）；
            - 第 2 个子网主机范围：192.168.50.33 ~ 192.168.50.62（广播地址 192.168.50.63）。
        - 常见魔数对应表（C 类地址）：
        
            | 借位 k | 子网掩码末尾非零数字 | 魔数 MN | 可用主机数 |
            |-------|----------------------|--------|------------|
            | 2     | 192                  | 64     | 62         |
            | 3     | 224                  | 32     | 30         |
            | 4     | 240                  | 16     | 14         |
            | 5     | 248                  | 8      | 6          |
            | 6     | 252                  | 4      | 2          |
            
- IPv6 子网划分
    - IPv6 与 IPv4 子网划分的核心差异
    
        | 对比维度       | IPv4 子网划分                | IPv6 子网划分                |
        |----------------|-----------------------------|-----------------------------|
        | 核心目的       | 节省地址资源（地址稀缺）     | 支持层次化网络设计（地址充足） |
        | 子网大小       | 需计算主机位，避免浪费      | 固定 /64 子网（主机位 64 位）   |
        | 划分逻辑       | 借主机位创建子网            | 利用 16 位子网 ID 递增创建子网  |
        | 地址数量       | 每个子网最多 65534 台主机     | 每个子网 2^64 台主机（无需担心浪费） |
        
    - IPv6 全局单播地址结构
        - IPv6 全局单播地址 = 48 位全局路由前缀 + 16 位子网 ID + 64 位接口 ID（总前缀 /64）：
            - 全局路由前缀：由 ISP 分配，标识组织网络（类似 IPv4 网络部分）；
            - 子网 ID：组织内部划分子网的核心字段（16 位可创建 2^16=65536 个 /64 子网）；
            - 接口 ID：标识子网内设备（类似 IPv4 主机部分，通常自动生成）。
    - IPv6 子网划分方法
        - 核心原则：通过递增“子网 ID”字段创建子网，无需借位（/64 子网固定，无需 VLSM）。
        - 示例：分配地址块 2001:0DB8:ACAD::/48（48 位全局路由前缀）
            - 子网 ID 范围：0000 ~ FFFF（16 位十六进制）；
            - 子网地址：2001:0DB8:ACAD:0000::/64（子网 0）、2001:0DB8:ACAD:0001::/64（子网 1）...2001:0DB8:ACAD:FFFF::/64（子网 65535）；
            - 分配场景：为 4 个 LAN 和 1 个 WAN 各分配 1 个子网（子网 ID 0001~0005），每个子网地址充足，无需考虑浪费。
    - IPv6 子网配置示例（R1）
    
        ```
        R1(config)#interface gigabitethernet 0/0  // LAN 子网：2001:DB8:ACAD:0001::/64
        R1(config-if)#ipv6 address 2001:DB8:ACAD:0001::1/64
        R1(config-if)#exit
        R1(config)#interface serial 0/0/0  // WAN 子网：2001:DB8:ACAD:0002::/64
        R1(config-if)#ipv6 address 2001:DB8:ACAD:0002::1/64
        R1(config-if)#end
        ```
        
- 核心总结
    - IPv4 子网划分关键：
        - 核心是“借位”：从主机位借位作为子网位，平衡子网数和主机数；
        - 公式是基础：子网数 2^k、主机数 2^n-2；
        - VLSM 是优化：避免地址浪费，需“从大到小”划分；
        - 魔数是工具：快速计算子网参数，提升配置效率。
    - IPv6 子网划分关键：
        - 结构固定：/64 子网（48+16+64），无需计算主机位；
        - 划分简单：递增子网 ID 即可，支持海量子网；
        - 目的不同：为层次化设计，而非节省地址。
    - 适用场景：
        - IPv4：中小型网络、地址资源有限的场景（如企业内网、校园网）；
        - IPv6：大型网络、未来网络升级（如运营商网络、物联网场景）。
